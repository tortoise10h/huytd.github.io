 <div class="comments">
              <div id="comment-loading" class="loading"></div>
              <div id="login-box" class="login">
                Bạn cần <button onclick="login()">Login</button> để comment
              </div>
              <div id="comment-box" class="comment-input">
                <div class="avatar">
                  <img id="user-avatar" src="" width="32" height="32"/>
                </div>
                <div class="input">
                  <textarea id="comment-content" onkeyup="autoSizing(this)" onkeydown="submitComment(event)" placeholder="Comment gõ vào đây :D"></textarea>
                  <span>Gõ xong nhấn <kbd>Ctrl</kbd> + <kbd>Enter</kbd> để gửi.</span>
                </div>
              </div>
              <ul id="comment-list" class="comment-list"></ul>
            </div>   



<script src="https://www.gstatic.com/firebasejs/3.8.0/firebase.js"></script>
    <script>
      // Initialize Firebase
      var config = {
        apiKey: "AIzaSyA1PnIAlJJ-U6iQJMNnCOknBuziBqGMYcY",
        authDomain: "huys-blog-comment.firebaseapp.com",
        databaseURL: "https://huys-blog-comment.firebaseio.com",
        projectId: "huys-blog-comment",
        storageBucket: "huys-blog-comment.appspot.com",
        messagingSenderId: "317330376829"
      };
      firebase.initializeApp(config);
    </script>
    <script>
    let provider = new firebase.auth.GoogleAuthProvider();
    let auth = firebase.auth();
    let currentUser = null;
    let postCommentURL = 'posts/chon-mua-laptop/comments';

    auth.onAuthStateChanged(function(user) {
      document.getElementById("comment-loading").style.display = "none";
      if (user) {
        currentUser = user;
        // Logged in
        document.getElementById("login-box").style.display = "none";
        document.getElementById("comment-box").style.display = "flex";
        document.getElementById("user-avatar").setAttribute("src", user.photoURL);
      } else {
        // Not login yet
        document.getElementById("comment-box").style.display = "none";
        document.getElementById("login-box").style.display = "block";
      }
    });

    const login = function() {
      auth.signInWithPopup(provider)
        .then(function(result) {
        }).catch(function(err) {
        });
    };

    const encodeHTML = function(s) {
        return s.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/"/g, '&quot;');
    };

    const saveNewComment = function(comment) {
      if (!currentUser) {
        return;
      }
      let commentData = {
        user: currentUser.displayName,
        avatar: currentUser.photoURL,
        time: (new Date()).toISOString(),
        message: encodeHTML(comment)
      };
      console.log(commentData);
      database.ref(postCommentURL).push(commentData);
      document.getElementById("comment-content").value = "";
    };

    const submitComment = function(e) {
      let keyCode = e.which || e.keyCode;
      let ctrlCode = e.ctrlKey || e.metaKey;
      if (keyCode === 13 && ctrlCode) {
        let comment = document.getElementById("comment-content").value;
        console.log("Submit comment with:", comment);
        saveNewComment(comment);
      }
    };

    const addNewComment = function(user, avatar, time, comment) {
      let commentFiltered = encodeHTML(comment);
      let d = new Date(time);
      let commentTime = d.toLocaleTimeString() + ' ' + d.toLocaleDateString();
      let html = '<div class="avatar">' +
                 '   <img src="' + avatar + '" width="32" height="32"/>' +
                 ' </div>' +
                 '<div class="comment">' +
                 '  <div class="metadata"><b>' + user + '</b> lúc <span>' + commentTime + '</span></div>' +
                 '  <div class="content">' + commentFiltered
                 '  </div>' +
                 '</div>';
      let li = document.createElement('li');
      li.innerHTML = html;
      document.getElementById("comment-list").append(li);
    };

    let database = firebase.database();
    let posts = database.ref(postCommentURL).orderByChild('time');
    posts.on('child_added', function(data) {
      addNewComment(data.val().user, data.val().avatar, data.val().time, data.val().message);
    });
    </script>
