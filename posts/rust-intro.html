<html>
    <head>
        <title> Giới thiệu về Rust | Huy's Blog</title>
        <meta charset="utf-8">
        <meta http-equiv="content-type" content="text/html;"><meta name=viewport content="initial-scale=1.0 maximum-scale=1.0">
        
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inconsolata:400,700">
        <link href='https://fonts.googleapis.com/css?family=Noto+Serif:400,400italic,700,700italic&subset=latin,vietnamese' rel='stylesheet' type='text/css'>
        <link href="../css/theme.css" rel="stylesheet" type="text/css">
        <link rel="stylesheet" href="../css/highlight/tomorrow.css">
        <link rel="stylesheet" href="../css/fontello.css">
        <script src="../js/highlight.pack.js"></script>
        <script>
        hljs.initHighlightingOnLoad();
        </script>
    </head>
    <body>
        <div class="header">
            <a href="/"><i class="icon icon-emo-coffee"></i> Huy's Blog</a>
        </div>
        <div class="container">
            <div class="main">
                <h1 id="gi-i-thi-u-v-rust">Giới thiệu về Rust</h1>
<p><a href="https://rust-lang.vn/">Rust</a> (đọc là <strong>rớt-xtờ</strong> /rʌst/) là một ngôn ngữ lập trình hệ thống (system programming language) được quảng bá là có tốc độ cực kì nhanh, ngăn chặn được phần lớn mọi bug crash (<a href="https://en.m.wikipedia.org/wiki/Segmentation_fault">segfaults</a>), ngăn chặn được <a href="http://docs.oracle.com/cd/E19205-01/820-0619/geojs/index.html">data race</a>, rất memory safe mà lại không cần tới garbage collector!</p>
<p>Cú pháp cơ bản của một chương trình <code>Hello World</code> trong Rust như thế này:</p>
<pre><code>fn main() {
  println!(&quot;hello, {}&quot;, &quot;world&quot;);
}
</code></pre><p>Bạn thấy gì qua đoạn chương trình trên nào? Có vẻ vừa giống C, vừa giống Go hay Swift, Java, C#,... mỗi thứ một tí, đúng không? </p>
<h2 id="t-i-sao-n-n-d-ng-rust-">Tại sao nên dùng Rust?</h2>
<p>Chắc các bạn cũng biết đến khả năng kiểm soát tài nguyên khi làm việc với các ngôn ngữ như C/C++ hay Java, Python, Ruby, JavaScript,...</p>
<p><img src="img/why-rust.png" alt=""></p>
<p>Với C/C++, bạn được: </p>
<ul>
<li>Toàn quyền kiểm soát mọi thứ (<code>malloc</code>, <code>free</code>,...)</li>
<li>Thường xuyên đau đầu với <code>memory leak</code>, <code>data race</code>, <code>segfaults</code>,... </li>
</ul>
<p>Đối với thiên đường JavaScript hay Ruby, bạn:</p>
<ul>
<li>Chẳng cần phải quan tâm một biến được cấp phát như thế nào và mất đi ra sao</li>
<li>Nhưng trade-off của nó chính là performance cực kì tệ hại.</li>
</ul>
<p>Rust là giải pháp kết hợp cho ưu điểm của cả 2 loại ngôn ngữ trên, khi làm việc với Rust, bạn không cần phải quan tâm tới việc bị <code>memory leak</code> hay <code>segfault</code>, khi làm multi thread, bạn không còn sợ <code>data race</code> vì <code>rust compiler</code> đã lo hết chuyện đó cho bạn, để đảm bảo trong lúc chạy (runtime) thì chương trình sẽ luôn hoạt động một cách an toàn và vẫn đảm bảo được tốc độ và performance tối ưu nhất.</p>
<p>À! Chắc sẽ có bạn hỏi: <strong>Rust và Go thì nên chọn ai?</strong> Nếu có cùng thắc mắc, thì <a href="https://dave.cheney.net/2015/07/02/why-go-and-rust-are-not-competitors">xin mời bạn xem bài này nhé</a></p>
<h2 id="rust-nhanh-t-i-m-c-n-o-">Rust nhanh tới mức nào?</h2>
<p>OK. Đầu tiên phải nói ngay là Rust không phải ngôn ngữ lập trình nhanh nhất, không có cái nào như thế cả.</p>
<p>Cũng giống như C hay Go (và khác với Ruby, NodeJS hay Python,...), một chương trình Rust sẽ được compile trực tiếp ra file binary để chạy.</p>
<p><img src="img/rustconf-2016-illustrated-adventure-guide-33-638.jpg" alt=""></p>
<center style="font-size: 0.7em;">Ảnh lấy từ: <a href="http://www.slideshare.net/LizBaillie/rustconf-2016-illustrated-adventure-guide-65894363">http://www.slideshare.net/LizBaillie/rustconf-2016-illustrated-adventure-guide-65894363</a></center>

<p>Ưu điểm của việc này đó là tốc độ thực thi nhanh chóng, vì được thực thi trực tiếp bởi máy tính chứ không phải trình thông dịch (interpreter) hay JIT (Just-In-Time) execution (như Java hay C#).</p>
<p>Khi so sánh với các ngôn ngữ khác, thực sự thì đây là một việc không cần thiết, nhưng chúng ta có thể tham khảo, bảng so sánh tốc độ thực thi <a href="https://huytd.github.io/posts/fibonacci-4m.html">tính tổng dãy số Fibonacci</a> giữa các ngôn ngữ Rust, Go, NodeJS và Swift:</p>
<p><img src="img/rust-performance.jpg" alt=""></p>
<p>Bạn có thể xem bảng so sánh performance của Rust và một số ngôn ngữ khác tại:</p>
<ul>
<li><a href="http://benchmarksgame.alioth.debian.org/u64q/compare.php?lang=rust&amp;lang2=java">The Computer Language Benchmarks Game</a></li>
<li><a href="https://grigio.org/go-vs-node-vs-rust-vs-swift/">Go vs Node vs Rust vs Swift</a></li>
</ul>
<h2 id="rust-an-to-n-t-i-c-n-o-">Rust an toàn tới cỡ nào?</h2>
<p>Một trong những điểm mà Rust quảng cáo đó là an toàn, không bao giờ bị crash, vậy làm sao Rust đạt được những điều đó?</p>
<p>Câu trả lời nằm ở <strong>Rust Compiler</strong>.</p>
<p>Thông thường, phần lớn lỗi của một chương trình C/C++ sẽ liên quan đến việc truy xuất bộ nhớ khi thực thi (runtime error - ví dụ bạn truy cập vào vùng bộ nhớ đã bị giải phóng, sử dụng nhầm các biến có giá trị null, lỡ tay tạo ra nhiều thread cùng ghi vào một vùng nhớ,...)</p>
<p><img src="img/xkcd-segfault.png" alt=""></p>
<p>Để ngăn chặn vấn đề này, Rust Compiler đề ra một loạt các quy tắc để kiểm tra ngay khi nó biên dịch chương trình, chúng ta sẽ không đi sâu vào các quy tắc này, nhưng mình sẽ nói sơ qua:</p>
<ul>
<li>Mọi biến mặc định đều là immutable, và không được mang giá trị null (nên không có lỗi <code>NullReferenceException</code>)</li>
<li>Trong Rust, một vùng nhớ luôn có <strong>một</strong> biến <strong>sỡ hữu</strong> nó.</li>
<li>Gán một biến vào một biến khác, tức là bạn chuyển <strong>quyền sở hữu</strong> vùng nhớ của biến đó cho biến mới. Biến cũ không được quyền truy xuất tới đó nữa.</li>
<li><strong>Nhiều</strong> biến khác có thể <strong>mượn</strong> vùng nhớ đó <strong>chỉ để đọc</strong> (read only).</li>
<li>Nhưng <strong>chỉ có một</strong> biến có quyền <strong>mượn</strong> để <strong>ghi</strong> giá trị lên đó.</li>
<li>Một biến chỉ có thể tồn tại bên trong scope của nó, ra khỏi scope đó nó sẽ bị giải phóng <strong>ngay lập tức</strong>.</li>
</ul>
<p>Bất cứ khi nào lập trình viên vi phạm các quy tắc này, Rust sẽ báo cho bạn biết ngay khi biên dịch, chứ không để lọt lỗi.</p>
<p>Trong số các quy tắc được liệt kê ở trên, 5 quy tắc cuối cùng chính là <a href="https://doc.rust-lang.org/book/ownership.html">Ownership, Borrowing &amp; Lifetime System</a> của Rust.</p>
<p>Ví dụ với đoạn code sau minh họa cho vấn đề <strong>chuyển quyền sở hữu</strong> đề cập ở trên:</p>
<pre><code>let v = vec![1, 2, 3];
let v2 = v;

println!(&quot;v[0] is: {}&quot;, v[0]);
</code></pre><p>Theo lẽ thường, chúng ta nghĩ đoạn code trên sẽ in ra số <code>1</code>, là giá trị của <code>v[0]</code>. Nhưng khi biên dịch thì sẽ gặp ngay lỗi:</p>
<pre><code>error: use of moved value: `v`
println!(&quot;v[0] is: {}&quot;, v[0]);
</code></pre><p>Đừng lo nếu bạn không hiểu tại sao lại phát sinh ra lỗi này, ví dụ này chỉ để minh họa cho bạn thấy về khả năng bắt lỗi runtime ngay cả trong compile time của Rust thôi.</p>
<h2 id="rust-kh-ng-c-n-garbage-collector-">Rust không cần Garbage Collector?</h2>
<p>Đúng vậy, Rust không có <strong>garbage collector</strong> (GC), nhưng vẫn đảm bảo được tính an toàn về bộ nhớ, đây là một trong những chức năng đặc biệt của Rust.</p>
<p><img src="img/garbage-collector.png" alt=""></p>
<p>Thay vào đó, Rust Compiler sẽ dự đoán được khi nào một biến sẽ hết được sử dụng và tự động chèn thêm code logic để giải phóng nó, giảm thiểu chi phí cho việc quản lý bộ nhớ lúc runtime. </p>
<pre><code>fn main() {
    let score = 10; // Khởi tạo vùng nhớ mới, cấp phát cho biến score
    // Tới đây là hết scope của biến score, mình nên giải phóng nó đi thôi 
}
</code></pre><p>Đoạn trên là diễn biến suy nghĩ của Rust Compiler qua từng dòng code :))</p>
<p>Và việc này được kiểm soát thông qua Ownership System.</p>
<p>Việc không có GC còn giúp Rust có thể dễ dàng được <a href="http://calculist.org/blog/2015/12/23/neon-node-rust/">nhúng</a> vào các ngôn ngữ có GC khác nữa.</p>
<h2 id="d-ng-rust-c-th-l-m-c-g-">Dùng Rust có thể làm được gì?</h2>
<p>Đây là câu hỏi mà mình thấy nhiều người hỏi nhất. </p>
<p>Câu trả lời là: <strong>Mọi thứ!</strong></p>
<p>Mặc dù là một ngôn ngữ lập trình hệ thống (system programming language), nhưng Rust nhắm tới việc cạnh tranh với C/C++ để tăng độ an toàn và cải thiện performance cho các phần mềm được viết ra, vì thế Rust có thể làm được mọi thứ mà C/C++ làm được, ví dụ:</p>
<ul>
<li><a href="http://os.phil-opp.com/">Viết hệ điều hành</a></li>
<li><a href="https://github.com/kud1ing/awesome-rust#web-programming">Lập trình web</a></li>
<li><a href="https://github.com/kud1ing/awesome-rust#mobile">Phát triển mobile app</a></li>
<li><a href="https://github.com/jwilm/alacritty">Viết Terminal Emulator</a></li>
<li><a href="https://github.com/kud1ing/awesome-rust#machine-learning">Machine Learning</a></li>
<li><a href="https://github.com/kud1ing/awesome-rust#database">Viết Database</a></li>
<li><a href="https://github.com/bluejekyll/trust-dns">Viết DNS server</a></li>
<li><a href="https://github.com/servo/servo">Viết browser engine</a></li>
<li><a href="https://github.com/kud1ing/awesome-rust#applications-written-in-rust">Viết Giả lập Playstation/NES/Gameboy/...</a></li>
<li><a href="https://github.com/kud1ing/awesome-rust#applications-written-in-rust">Viết Game</a></li>
<li><a href="https://github.com/kud1ing/awesome-rust#image-processing">Xử lý ảnh</a></li>
<li><a href="https://github.com/kud1ing/awesome-rust#network-programming">Lập trình mạng</a></li>
<li>...</li>
</ul>
<h2 id="gi-b-t-u-h-c-rust-nh-th-n-o-">Giờ bắt đầu học Rust như thế nào?</h2>
<p><img src="img/rustconf-2016-illustrated-adventure-guide-22-638.jpg" alt=""></p>
<p>Để bắt đầu, các bạn có thể tham khảo một số tài liệu sau:</p>
<ul>
<li><a href="http://rustbyexample.com/">Rust by Example</a>: Trang web tổng hợp đầy đủ các ví dụ từ đơn giản đến phức tạp để giúp bạn làm quen với cú pháp và các kĩ thuật trong Rust.</li>
<li><a href="https://doc.rust-lang.org/book/">Sách The Rust Programming Language</a>: Đây là cuốn sách chính thức của Rust, trình bày một cách đầy đủ và chi tiết từ A-Z khi học Rust.</li>
<li><a href="http://www.slideshare.net/saneyuki/rusts-ownership-and-move-semantics">Slide Rust&#39;s Ownership and Move Semantics</a>: Một slide khá chi tiết trình bày về Ownership System của Rust. </li>
</ul>
<p>Ngoài ra, các bạn có thể tham gia vào các cộng đồng Rust như:</p>
<ul>
<li><a href="https://users.rust-lang.org/">Diễn đàn</a>: Diễn đàn chính thức của Rust</li>
<li><a href="https://chat.mibbit.com/?server=irc.mozilla.org&amp;channel=%23rust-beginners">IRC</a>: Kênh IRC để hỏi các vấn đề khi học Rust</li>
<li><a href="https://this-week-in-rust.org/">Bản tin This Week in Rust</a>: Nơi cập nhật tin tức hàng tuần về Rust, những thư viện mới, những sự kiện sắp diễn ra,...</li>
<li><a href="http://blog.rust-lang.org/">Rust Blog</a>: Nơi core team của Rust đưa ra các thông báo mới nhất về ngôn ngữ này.</li>
<li><a href="https://www.reddit.com/r/rust">Reddit</a>: Subreddit về Rust</li>
</ul>
<p>For fun, bạn nên biết một số từ vựng nên biết trước khi gia nhập cộng đồng này :))</p>
<ul>
<li><strong>Rustacean</strong>: Là từ chỉ những người sử dụng Rust, giống như <strong>Gophers</strong> hay <strong>Rubyist</strong> hay <strong>Alchemist</strong> (của Elixir).</li>
<li><strong>Rustlandia</strong>: Là khu vực mà các rustaceans hoạt động, cái này chắc chỉ có hội Rust mới có :))</li>
</ul>
<p>Ngoài ra chúng ta cũng có cộng đồng <strong>Rust Việt Nam</strong>:</p>
<ul>
<li><a href="https://rust-lang.vn">Trang web</a></li>
<li><a href="https://www.facebook.com/vietnam.rust/">Facebook Page</a></li>
<li><a href="https://github.com/rust-vietnam/">GitHub</a></li>
<li><a href="http://chat.ruby.org.vn/">Slack Chat</a>: Join vào channel <a href="https://vietnamrb.slack.com/messages/rustlang/">#rustlang</a></li>
</ul>
<p>Hẹn gặp lại các bạn ở Rustlandia!!!</p>

                <div class="fb-like" data-href="http://huytd.github.io/posts/rust-intro.html" data-layout="standard" data-action="like" data-show-faces="true" data-share="true"></div>
                <div id="disqus_thread"></div>
                <script>
                /**
                * RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
                * LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
                */
                /*
                var disqus_config = function () {
                this.page.url = PAGE_URL; // Replace PAGE_URL with your page's canonical URL variable
                this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
                };
                */
                (function() { // DON'T EDIT BELOW THIS LINE
                var d = document, s = d.createElement('script');

                s.src = '//huysblog.disqus.com/embed.js';

                s.setAttribute('data-timestamp', +new Date());
                (d.head || d.body).appendChild(s);
                })();
                </script>
                <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
            </div>
        </div>
	    <div class="footer">
            <p>Created with <a href="http://github.com/huytd/azeroth-js">azeroth.js</a></p>
            <div class="social">
                <a target="_blank" href="http://facebook.com/kingbazoka"><i class="icon-facebook-squared"></i></a>
                <a target="_blank" href="http://twitter.com/huydotnet"><i class="icon-twitter-squared"></i></a>
                <a target="_blank" href="http://github.com/huytd"><i class="icon-github-squared"></i></a>
                <a target="_blank" href="https://thefullsnack.com"><i class="icon-emo-coffee"></i></a>
            </div>
        </div>
        <script>
          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

          ga('create', 'UA-71353335-1', 'auto');
          ga('send', 'pageview');
        </script>
        <script>
          window.fbAsyncInit = function() {
            FB.init({
              appId      : '462066520669072',
              xfbml      : true,
              version    : 'v2.6'
            });

            FB.Event.subscribe('edge.create', function(url) {
              ga('send', 'social', 'facebook', 'like', url);
            });
          };

          (function(d, s, id){
             var js, fjs = d.getElementsByTagName(s)[0];
             if (d.getElementById(id)) {return;}
             js = d.createElement(s); js.id = id;
             js.src = "//connect.facebook.net/en_US/sdk.js";
             fjs.parentNode.insertBefore(js, fjs);
           }(document, 'script', 'facebook-jssdk'));
        </script>
        <script id="dsq-count-scr" src="//huysblog.disqus.com/count.js" async></script>
        <script type="text/javascript" async src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script>
        <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
          tex2jax: {
            inlineMath: [['$','$'], ['\\(','\\)']],
            skipTags: ["script","noscript","style","textarea"]
          }
        });
        </script>
    </body>
</html>
