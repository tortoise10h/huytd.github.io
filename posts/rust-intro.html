<html>
    <head>
        <title> Rust lÃ  gÃ¬? CÃ³ Äƒn Ä‘Æ°á»£c khÃ´ng? | Huy's Blog</title>
        <meta charset="utf-8">
        <meta http-equiv="content-type" content="text/html;"><meta name=viewport content="initial-scale=1.0 maximum-scale=1.0">
        
        <link href="../css/inconsolata.css" rel="stylesheet" type="text/css">
        <link href="../css/theme.css" rel="stylesheet" type="text/css">
        <link rel="stylesheet" href="../css/highlight/tomorrow.css">
        <link rel="stylesheet" href="../css/fontello.css">
        <script src="../js/highlight.pack.js"></script>
        <script src="../js/autosizing.js"></script>
        <script>
        hljs.initHighlightingOnLoad();
        </script>
    </head>
    <body>
        <div class="header">
            <a href="/"><i class="icon icon-emo-coffee"></i> Huy's Blog</a>
        </div>
        <div class="container">
            <div class="main">
                <h1 id="rust-l-g-c-n-c-kh-ng-">Rust lÃ  gÃ¬? CÃ³ Äƒn Ä‘Æ°á»£c khÃ´ng?</h1>
<p><a href="https://rust-lang.vn/">Rust</a> (Ä‘á»c lÃ  <strong>rá»›t-xtá»</strong> /rÊŒst/) lÃ  má»™t ngÃ´n ngá»¯ láº­p trÃ¬nh há»‡ thá»‘ng (system programming language) Ä‘Æ°á»£c quáº£ng bÃ¡ lÃ  cÃ³ tá»‘c Ä‘á»™ cá»±c kÃ¬ nhanh, ngÄƒn cháº·n Ä‘Æ°á»£c pháº§n lá»›n má»i bug crash (<a href="https://en.m.wikipedia.org/wiki/Segmentation_fault">segfaults</a>), ngÄƒn cháº·n Ä‘Æ°á»£c <a href="http://docs.oracle.com/cd/E19205-01/820-0619/geojs/index.html">data race</a>, ráº¥t memory safe mÃ  láº¡i khÃ´ng cáº§n tá»›i garbage collector!</p>
<p>CÃº phÃ¡p cÆ¡ báº£n cá»§a má»™t chÆ°Æ¡ng trÃ¬nh <code>Hello World</code> trong Rust nhÆ° tháº¿ nÃ y:</p>
<pre><code>fn main() {
  println!(&quot;hello, {}&quot;, &quot;world&quot;);
}
</code></pre><p>Báº¡n tháº¥y gÃ¬ qua Ä‘oáº¡n chÆ°Æ¡ng trÃ¬nh trÃªn nÃ o? CÃ³ váº» vá»«a giá»‘ng C, vá»«a giá»‘ng Go hay Swift, Java, C#,... má»—i thá»© má»™t tÃ­, Ä‘Ãºng khÃ´ng? </p>
<h2 id="t-i-sao-n-n-d-ng-rust-">Táº¡i sao nÃªn dÃ¹ng Rust?</h2>
<p>Cháº¯c cÃ¡c báº¡n cÅ©ng biáº¿t Ä‘áº¿n kháº£ nÄƒng kiá»ƒm soÃ¡t tÃ i nguyÃªn khi lÃ m viá»‡c vá»›i cÃ¡c ngÃ´n ngá»¯ nhÆ° C/C++ hay Java, Python, Ruby, JavaScript,...</p>
<p><img src="img/why-rust.png" alt=""></p>
<p>Vá»›i C/C++, báº¡n Ä‘Æ°á»£c: </p>
<ul>
<li>ToÃ n quyá»n kiá»ƒm soÃ¡t má»i thá»© (<code>malloc</code>, <code>free</code>,...)</li>
<li>ThÆ°á»ng xuyÃªn Ä‘au Ä‘áº§u vá»›i <code>memory leak</code>, <code>data race</code>, <code>segfaults</code>,... </li>
</ul>
<p>Äá»‘i vá»›i thiÃªn Ä‘Æ°á»ng JavaScript hay Ruby, báº¡n:</p>
<ul>
<li>Cháº³ng cáº§n pháº£i quan tÃ¢m má»™t biáº¿n Ä‘Æ°á»£c cáº¥p phÃ¡t nhÆ° tháº¿ nÃ o vÃ  máº¥t Ä‘i ra sao</li>
<li>NhÆ°ng trade-off cá»§a nÃ³ chÃ­nh lÃ  performance cá»±c kÃ¬ tá»‡ háº¡i.</li>
</ul>
<p>Rust lÃ  giáº£i phÃ¡p káº¿t há»£p cho Æ°u Ä‘iá»ƒm cá»§a cáº£ 2 loáº¡i ngÃ´n ngá»¯ trÃªn, khi lÃ m viá»‡c vá»›i Rust, báº¡n khÃ´ng cáº§n pháº£i quan tÃ¢m tá»›i viá»‡c bá»‹ <code>memory leak</code> hay <code>segfault</code>, khi lÃ m multi thread, báº¡n khÃ´ng cÃ²n sá»£ <code>data race</code> vÃ¬ <code>rust compiler</code> Ä‘Ã£ lo háº¿t chuyá»‡n Ä‘Ã³ cho báº¡n, Ä‘á»ƒ Ä‘áº£m báº£o trong lÃºc cháº¡y (runtime) thÃ¬ chÆ°Æ¡ng trÃ¬nh sáº½ luÃ´n hoáº¡t Ä‘á»™ng má»™t cÃ¡ch an toÃ n vÃ  váº«n Ä‘áº£m báº£o Ä‘Æ°á»£c tá»‘c Ä‘á»™ vÃ  performance tá»‘i Æ°u nháº¥t.</p>
<p>Ã€! Cháº¯c sáº½ cÃ³ báº¡n há»i: <strong>Rust vÃ  Go thÃ¬ nÃªn chá»n ai?</strong> Náº¿u cÃ³ cÃ¹ng tháº¯c máº¯c, thÃ¬ <del>Ä‘Æ°Æ¡ng nhiÃªn lÃ  chá»n Rust rá»“i, vÃ¬ mÃ¬nh Ä‘ang quáº£ng cÃ¡o Rust mÃ </del> :)) <a href="https://dave.cheney.net/2015/07/02/why-go-and-rust-are-not-competitors">xin má»i báº¡n xem bÃ i nÃ y nhÃ©</a>.</p>
<h2 id="rust-nhanh-t-i-m-c-n-o-">Rust nhanh tá»›i má»©c nÃ o?</h2>
<p>OK. Äáº§u tiÃªn pháº£i nÃ³i ngay lÃ  Rust khÃ´ng pháº£i ngÃ´n ngá»¯ láº­p trÃ¬nh nhanh nháº¥t, trong sá»‘ cÃ¡c ngÃ´n ngá»¯ láº­p trÃ¬nh báº­c cao (high level programming language), khÃ´ng cÃ³ cÃ¡i nÃ o nhÆ° tháº¿ cáº£.</p>
<p>Váº­y <strong>ngÃ´n ngá»¯ nÃ o má»›i lÃ  nhanh nháº¥t?</strong> vÃ  <strong>vÃ¬ sao nÃ³ nhanh?</strong></p>
<p>Káº» Ä‘áº¡t danh hiá»‡u Ä‘Ã³ cháº¯c pháº£i nÃ³i Ä‘áº¿n Assembly, Ä‘Ã³ lÃ  nÆ¡i báº¡n toÃ n quyá»n kiá»ƒm soÃ¡t má»™t biáº¿n Ä‘Æ°á»£c táº¡o ra á»Ÿ Ä‘Ã¢u, khi nÃ o. ThÃ­ch táº¡o ra trong stack hay trong heap lÃ  tÃ¹y báº¡n. Báº¡n Ä‘Æ°á»£c toÃ n quyá»n vá»›i bá»™ nhá»›, vÃ¬ bá»™ nhá»› lÃ  cá»§a nÃ³ luÃ´n, thÃ­ch xÃ i lÃºc nÃ o lÃ  xÃ i.</p>
<h3 id="m-khoan-kh-n-ng-ki-m-so-t-li-n-quan-g-t-i-t-c-">MÃ  khoan Ä‘Ã£! Kháº£ nÄƒng kiá»ƒm soÃ¡t liÃªn quan gÃ¬ tá»›i tá»‘c Ä‘á»™?</h3>
<p>Trong Assembly, má»—i instruction (lá»‡nh) Ä‘Æ°á»£c viáº¿t ra Ä‘á»u Ä‘Æ°á»£c map chÃ­nh xÃ¡c vá»›i binary code/machine opcode mÃ  tá»«ng loáº¡i CPU cung cáº¥p (<em>&quot;close to the metal&quot;</em>). </p>
<p><img src="img/machine-code.png" alt=""></p>
<p>Khi lÃ m viá»‡c vá»›i Assembly, báº¡n pháº£i náº¯m Ä‘Æ°á»£c <strong>táº­p lá»‡nh</strong> (instruction set) cá»§a loáº¡i CPU mÃ  báº¡n Ä‘ang lÃ m viá»‡c - <strong>vÃ  vá»›i má»—i loáº¡i CPU khÃ¡c nhau thÃ¬ láº¡i cÃ³ má»™t táº­p lá»‡nh khÃ¡c nhau</strong> - vÃ  nÃ³ má»™t loáº¡i cÃº phÃ¡p háº¿t sá»©c gáº§n gÅ©i vá»›i mÃ¡y tÃ­nh (nhÆ°ng xa láº¡ vá»›i con ngÆ°á»i :)))</p>
<p><img src="img/assembly-map.png" alt=""></p>
<p>C ra Ä‘á»i Ä‘á»ƒ kháº¯c phá»¥c nhÆ°á»£c Ä‘iá»ƒm nÃ y cá»§a Assembly, Ä‘Æ°a sá»©c máº¡nh kiá»ƒm soÃ¡t cá»§a Assembly vÃ o chung vá»›i cÃº phÃ¡p thÃ¢n thiá»‡n hÆ¡n vá»›i cÃ¡c láº­p trÃ¬nh viÃªn. </p>
<p>Báº±ng cÃ¡ch lÆ°á»£t bá» háº¿t nhá»¯ng dÃ²ng lá»‡nh phá»©c táº¡p cá»§a mÃ£ mÃ¡y, C thay tháº¿ báº±ng cÃ¡c cÃ¢u lá»‡nh Ä‘Æ¡n giáº£n hÆ¡n (syntax sugar). VÃ­ dá»¥:</p>
<pre><code>    .section    __TEXT,__text,regular,pure_instructions
    .macosx_version_min 10, 12
    .globl    _main
    .align    4, 0x90
_main:                                  ## @main
    .cfi_startproc
## BB#0:
    pushq    %rbp
Ltmp0:
    .cfi_def_cfa_offset 16
Ltmp1:
    .cfi_offset %rbp, -16
    movq    %rsp, %rbp
Ltmp2:
    .cfi_def_cfa_register %rbp
    xorl    %eax, %eax
    movl    $100, -4(%rbp)
    popq    %rbp
    retq
    .cfi_endproc


.subsections_via_symbols
</code></pre><p>Äoáº¡n mÃ£ Assembly trÃªn lÃ  nhá»¯ng gÃ¬ sáº½ Ä‘Æ°á»£c compiler dá»‹ch ra cho Ä‘oáº¡n chÆ°Æ¡ng trÃ¬nh C sau:</p>
<pre><code>int main() {
  int number = 100;
}
</code></pre><p>Chá»‰ vá»›i 3 dÃ²ng code C (mid level language), báº¡n sáº½ khÃ´ng cÃ²n pháº£i váº­t vÃ£ viáº¿t tá»«ng lá»‡nh Ä‘á»ƒ cáº¥p phÃ¡t bá»™ nhá»›, move giÃ¡ trá»‹ vÃ o tá»«ng Ã´ nhá»›, giáº£i phÃ³ng nÃ³ khi káº¿t thÃºc chÆ°Æ¡ng trÃ¬nh trong Assembly ná»¯a. VÃ¬ C Ä‘Ã£ Ä‘Æ¡n giáº£n hÃ³a váº¥n Ä‘á» báº±ng cÃ¡ch &quot;giáº¥u&quot; Ä‘i táº¥t cáº£ nhá»¯ng thao tÃ¡c Ä‘Ã³ vÃ  Ä‘Æ°a ra cho báº¡n má»™t cÃº phÃ¡p vÃ´ cÃ¹ng Ä‘Æ¡n giáº£n lÃ  <code>int number = 100;</code>.</p>
<p>Viá»‡c &quot;giáº¥u&quot; bá»›t cÃ¡c thao tÃ¡c rÆ°á»m rÃ  vÃ  cung cáº¥p má»™t phÆ°Æ¡ng phÃ¡p Ä‘Æ¡n giáº£n hÆ¡n Ä‘á»ƒ thá»±c hiá»‡n má»™t váº¥n Ä‘á» Ä‘Æ°á»£c gá»i lÃ  <strong>abstraction</strong>, vÃ  Ä‘iá»u nÃ y diá»…n ra cÃ ng nhiá»u hÆ¡n á»Ÿ cÃ¡c ngÃ´n ngá»¯ láº­p trÃ¬nh báº­c cao nhÆ° C#, Java, Ruby, JavaScript, Python,... </p>
<p><img src="img/c-programmer.png" alt=""></p>
<p>Lá»£i tháº¿ cá»§a <strong>abstraction</strong> Ä‘Ã³ lÃ  giÃºp cho láº­p trÃ¬nh viÃªn ráº£nh tay Ä‘á»ƒ cÃ²n táº­p trung vÃ o nhá»¯ng thá»© khÃ¡c quan trá»ng hÆ¡n nhÆ° code logic, business cá»§a chÆ°Æ¡ng trÃ¬nh. NhÆ°ng thá»±c cháº¥t thÃ¬ cÃ¡c thao tÃ¡c phá»©c táº¡p bÃªn dÆ°á»›i váº«n pháº£i Ä‘Æ°á»£c thá»±c hiá»‡n, vÃ  compiler cá»§a tá»«ng ngÃ´n ngá»¯ sáº½ cÃ³ nhiá»‡m vá»¥ &quot;viáº¿t&quot; cÃ¡c Ä‘oáº¡n code Ä‘Ã³ ra thay cho báº¡n. Káº¿t quáº£ lÃ  gÃ¬? </p>
<p>NhÆ° Ä‘Ã£ nÃ³i á»Ÿ trÃªn thÃ¬ má»—i ná»n táº£ng pháº§n cá»©ng láº¡i cÃ³ má»™t táº­p lá»‡nh khÃ¡c nhau, váº­y nÃªn pháº§n code Ä‘Æ°á»£c compiler &quot;thÃªm&quot; vÃ o pháº£i Ä‘Æ°á»£c viáº¿t theo má»™t cÃ¡ch khÃ´ng thá»ƒ phá»¥ thuá»™c vÃ o tá»«ng loáº¡i pháº§n cá»©ng cá»¥ thá»ƒ. VÃ­ dá»¥ nÃ³ khÃ´ng thá»ƒ cháº¯c cháº¯n Ä‘Æ°á»£c pháº£i truy cáº­p vÃ o Ä‘Ã¢u Ä‘á»ƒ láº¥y thÃ´ng tin vá» chuá»™t/bÃ n phÃ­m, tháº¿ lÃ  nÃ³ pháº£i tá»‘n thÃªm má»™t bÆ°á»›c Ä‘Ã³ lÃ : <em>Há»i mÃ¡y tÃ­nh xem con chuá»™t nÃ³ náº±m á»Ÿ Ä‘Ã¢u Ä‘á»ƒ truy váº¥n tá»›i.</em> VÃ  tháº¿ lÃ , thay vÃ¬ chá»‰ lÃ m má»—i nhiá»‡m vá»¥ <em>Ä‘á»c xem nÃºt nÃ o trÃªn con chuá»™t vá»«a Ä‘Æ°á»£c nháº¥n xuá»‘ng</em>, nÃ³ pháº£i lÃ m thÃªm má»™t vÃ i viá»‡c ná»¯a nhÆ° lÃ  <em>cháº¡y tá»›i há»i anh kernel cá»§a há»‡ Ä‘iá»u hÃ nh xem nhÃ  anh chuá»™t náº±m á»Ÿ Ä‘Ã¢u</em>, rá»“i <em>cháº¡y qua nhÃ  anh chuá»™t gÃµ cá»­a xem áº£nh cÃ³ nhÃ  khÃ´ng</em>,... vÃ  nhá»¯ng viá»‡c lÃ´i thÃ´i Ä‘Ã³ tá»‘n thÃªm má»™t Ã­t thá»i gian ná»¯a.</p>
<p><img src="img/rubymotion-factory.gif" alt=""></p>
<p>Nhá»¯ng gÃ¬ á»Ÿ bÃªn dÆ°á»›i thÃ¬ báº¡n sáº½ khÃ´ng thá»ƒ kiá»ƒm soÃ¡t hay can thiá»‡p vÃ o Ä‘á»ƒ tá»‘i Æ°u hÃ³a nÃ³ Ä‘Æ°á»£c, vÃ­ dá»¥: Báº¡n khÃ´ng bao giá» cÃ³ thá»ƒ chá»§ Ä‘á»™ng giáº£i phÃ³ng má»™t vÃ¹ng nhá»› khi dÃ¹ng Garbage Collector, báº¡n khÃ´ng thá»ƒ yÃªu cáº§u JavaScript táº¡o ra má»™t biáº¿n náº±m trong stack hay heap theo Ã½ báº¡n Ä‘Æ°á»£c,... vÃ  báº¡n pháº£i cháº¥p nháº­n vá»›i cÃ¡i cÃ¡ch nÃ³ Ä‘á»‘t thá»i gian nhÆ° lÃ  má»™t sá»± tháº­t hiá»ƒn nhiÃªn.</p>
<p>ÄÃ¡nh Ä‘á»•i <strong>tá»‘c Ä‘á»™</strong>, gia tÄƒng cÃ¡c lá»›p <strong>abstraction</strong>, giÃºp cho láº­p trÃ¬nh viÃªn cÃ³ thá»ƒ viáº¿t code má»™t cÃ¡ch thoáº£i mÃ¡i hÆ¡n, xÃ¢y dá»±ng sáº£n pháº©m nhanh hÆ¡n. ÄÃ³ lÃ  báº£n cháº¥t xáº¥u xa cá»§a cÃ¡c high level programming languages :)) </p>
<h3 id="zero-cost-abstraction">Zero-cost Abstraction</h3>
<p>CÅ©ng giá»‘ng nhÆ° C/C++, bÃªn cáº¡nh kháº£ nÄƒng kiá»ƒm soÃ¡t gáº§n nhÆ° tuyá»‡t Ä‘á»‘i (vÃ¢ng, Rust cÅ©ng cÃ³ thá»ƒ cho báº¡n kiá»ƒm soÃ¡t Ä‘áº¿n tá»«ng Ã´ nhá»›!), Rust chá»n <strong>zero-cost abstraction</strong> lÃ m má»™t trong nhá»¯ng nguyÃªn táº¯c ná»n táº£ng cá»§a nÃ³. </p>
<blockquote>
<p>C++ implementations obey the zero-overhead principle: What you don&#39;t use, you don&#39;t pay for [Stroustrup, 1994]. And further: What you do use, you couldn&#39;t hand code any better.</p>
<p>â€“ Stroustrup</p>
</blockquote>
<p><img src="img/assembly-code-image.png" alt=""></p>
<p>Rust design ra cÃ¡c abstraction dá»… dÃ¹ng, nhÆ°ng Ä‘Æ°á»£c compile vá» machine code má»™t cÃ¡ch ráº¥t hiá»‡u quáº£ vÃ  khÃ´ng lÃ m áº£nh hÆ°á»Ÿng Ä‘áº¿n tá»‘c Ä‘á»™ cá»§a toÃ n chÆ°Æ¡ng trÃ¬nh, cÃ¡c high-level API Ä‘Æ°á»£c compile vá» machine code má»™t cÃ¡ch Ã­t nháº¥t vÃ  tá»‘i Æ°u nháº¥t (you pay for the features you actually use).</p>
<p>NgoÃ i ra Rust cÃ²n giá»›i thiá»‡u khÃ¡i niá»‡m <a href="https://blog.rust-lang.org/2015/05/11/traits.html">Traits</a> giÃºp báº¡n Ä‘Æ°á»£c lÃ m viá»‡c giá»‘ng nhÆ° trÃªn cÃ¡c ngÃ´n ngá»¯ láº­p trÃ¬nh báº­c cao nhÆ°ng váº«n Ä‘áº£m báº£o Ä‘Æ°á»£c kháº£ nÄƒng kiá»ƒm soÃ¡t code vÃ  tÃ i nguyÃªn nhÆ° cÃ¡c ngÃ´n ngá»¯ láº­p trÃ¬nh báº­c tháº¥p!</p>
<h3 id="t-c-c-a-rust">Tá»‘c Ä‘á»™ cá»§a Rust</h3>
<p>Khi so sÃ¡nh vá»›i cÃ¡c ngÃ´n ngá»¯ khÃ¡c, thá»±c sá»± thÃ¬ Ä‘Ã¢y lÃ  má»™t viá»‡c khÃ´ng cáº§n thiáº¿t, nhÆ°ng chÃºng ta cÃ³ thá»ƒ tham kháº£o, báº£ng so sÃ¡nh tá»‘c Ä‘á»™ thá»±c thi <a href="https://huytd.github.io/posts/fibonacci-4m.html">tÃ­nh tá»•ng dÃ£y sá»‘ Fibonacci</a> giá»¯a cÃ¡c ngÃ´n ngá»¯ Rust, Go, NodeJS vÃ  Swift:</p>
<p><img src="img/rust-performance.jpg" alt=""></p>
<center style="font-size: 0.7em;">Báº£ng so sÃ¡nh thá»i gian thá»±c hiá»‡n, cÃ ng nhá» thÃ¬ cÃ ng xá»‹n</center>

<p>Báº¡n cÃ³ thá»ƒ xem báº£ng so sÃ¡nh performance cá»§a Rust vÃ  má»™t sá»‘ ngÃ´n ngá»¯ khÃ¡c táº¡i:</p>
<ul>
<li><a href="http://benchmarksgame.alioth.debian.org/u64q/compare.php?lang=rust&amp;lang2=java">The Computer Language Benchmarks Game</a></li>
<li><a href="https://grigio.org/go-vs-node-vs-rust-vs-swift/">Go vs Node vs Rust vs Swift</a></li>
</ul>
<h2 id="rust-an-to-n-t-i-c-n-o-">Rust an toÃ n tá»›i cá»¡ nÃ o?</h2>
<p>Má»™t trong nhá»¯ng Ä‘iá»ƒm mÃ  Rust quáº£ng cÃ¡o Ä‘Ã³ lÃ  an toÃ n, khÃ´ng bao giá» bá»‹ crash, váº­y lÃ m sao Rust Ä‘áº¡t Ä‘Æ°á»£c nhá»¯ng Ä‘iá»u Ä‘Ã³?</p>
<p>CÃ¢u tráº£ lá»i náº±m á»Ÿ <strong>Rust Compiler</strong>.</p>
<p>ThÃ´ng thÆ°á»ng, pháº§n lá»›n lá»—i cá»§a má»™t chÆ°Æ¡ng trÃ¬nh C/C++ sáº½ liÃªn quan Ä‘áº¿n viá»‡c truy xuáº¥t bá»™ nhá»› khi thá»±c thi (runtime error - vÃ­ dá»¥ báº¡n truy cáº­p vÃ o vÃ¹ng bá»™ nhá»› Ä‘Ã£ bá»‹ giáº£i phÃ³ng, sá»­ dá»¥ng nháº§m cÃ¡c biáº¿n cÃ³ giÃ¡ trá»‹ null, lá»¡ tay táº¡o ra nhiá»u thread cÃ¹ng ghi vÃ o má»™t vÃ¹ng nhá»›,...)</p>
<p><img src="img/xkcd-segfault.png" alt=""></p>
<p>Äá»ƒ ngÄƒn cháº·n váº¥n Ä‘á» nÃ y, Rust Compiler Ä‘á» ra má»™t loáº¡t cÃ¡c quy táº¯c Ä‘á»ƒ kiá»ƒm tra ngay khi nÃ³ biÃªn dá»‹ch chÆ°Æ¡ng trÃ¬nh, chÃºng ta sáº½ khÃ´ng Ä‘i sÃ¢u vÃ o cÃ¡c quy táº¯c nÃ y, nhÆ°ng mÃ¬nh sáº½ nÃ³i sÆ¡ qua:</p>
<ul>
<li>Má»i biáº¿n máº·c Ä‘á»‹nh Ä‘á»u lÃ  immutable, vÃ  khÃ´ng Ä‘Æ°á»£c mang giÃ¡ trá»‹ null (nÃªn khÃ´ng cÃ³ lá»—i <code>NullReferenceException</code>)</li>
<li>Trong Rust, má»™t vÃ¹ng nhá»› luÃ´n cÃ³ <strong>má»™t</strong> biáº¿n <strong>sá»¡ há»¯u</strong> nÃ³.</li>
<li>GÃ¡n má»™t biáº¿n vÃ o má»™t biáº¿n khÃ¡c, tá»©c lÃ  báº¡n chuyá»ƒn <strong>quyá»n sá»Ÿ há»¯u</strong> vÃ¹ng nhá»› cá»§a biáº¿n Ä‘Ã³ cho biáº¿n má»›i. Biáº¿n cÅ© khÃ´ng Ä‘Æ°á»£c quyá»n truy xuáº¥t tá»›i Ä‘Ã³ ná»¯a.</li>
<li>Trong má»™t thá»i Ä‘iá»ƒm, chá»‰ cÃ³ <strong>má»™t</strong> trong hai trÆ°á»ng há»£p cÃ³ thá»ƒ xáº£y ra, Ä‘Ã³ lÃ :<ul>
<li><strong>Nhiá»u</strong> biáº¿n khÃ¡c cÃ³ thá»ƒ <strong>mÆ°á»£n</strong> vÃ¹ng nhá»› Ä‘Ã³ <strong>chá»‰ Ä‘á»ƒ Ä‘á»c</strong> (read only).</li>
<li><strong>Chá»‰ cÃ³ má»™t</strong> biáº¿n cÃ³ quyá»n <strong>mÆ°á»£n</strong> Ä‘á»ƒ <strong>ghi</strong> giÃ¡ trá»‹ lÃªn Ä‘Ã³.</li>
</ul>
</li>
<li>Má»™t biáº¿n chá»‰ cÃ³ thá»ƒ tá»“n táº¡i bÃªn trong scope cá»§a nÃ³, ra khá»i scope Ä‘Ã³ nÃ³ sáº½ bá»‹ giáº£i phÃ³ng <strong>ngay láº­p tá»©c</strong>.</li>
</ul>
<p>Báº¥t cá»© khi nÃ o láº­p trÃ¬nh viÃªn vi pháº¡m cÃ¡c quy táº¯c nÃ y, Rust sáº½ bÃ¡o cho báº¡n biáº¿t ngay khi biÃªn dá»‹ch, chá»© khÃ´ng Ä‘á»ƒ lá»t lá»—i.</p>
<p>Trong sá»‘ cÃ¡c quy táº¯c Ä‘Æ°á»£c liá»‡t kÃª á»Ÿ trÃªn, trá»« quy táº¯c Ä‘áº§u tiÃªn ra, thÃ¬ nhá»¯ng má»¥c cÃ²n láº¡i chÃ­nh lÃ  <a href="https://doc.rust-lang.org/book/ownership.html">Ownership, Borrowing &amp; Lifetime System</a> cá»§a Rust.</p>
<p>VÃ­ dá»¥ vá»›i Ä‘oáº¡n code sau minh há»a cho váº¥n Ä‘á» <strong>chuyá»ƒn quyá»n sá»Ÿ há»¯u</strong> Ä‘á» cáº­p á»Ÿ trÃªn:</p>
<pre><code>let v = vec![1, 2, 3];
let v2 = v;

println!(&quot;v[0] is: {}&quot;, v[0]);
</code></pre><p>Theo láº½ thÆ°á»ng, chÃºng ta nghÄ© Ä‘oáº¡n code trÃªn sáº½ in ra sá»‘ <code>1</code>, lÃ  giÃ¡ trá»‹ cá»§a <code>v[0]</code>. NhÆ°ng khi biÃªn dá»‹ch thÃ¬ sáº½ gáº·p ngay lá»—i:</p>
<pre><code>error: use of moved value: `v`
println!(&quot;v[0] is: {}&quot;, v[0]);
</code></pre><p>Äá»«ng lo náº¿u báº¡n khÃ´ng hiá»ƒu táº¡i sao láº¡i phÃ¡t sinh ra lá»—i nÃ y, vÃ­ dá»¥ nÃ y chá»‰ Ä‘á»ƒ minh há»a cho báº¡n tháº¥y vá» kháº£ nÄƒng báº¯t lá»—i runtime ngay cáº£ trong compile time cá»§a Rust thÃ´i.</p>
<h2 id="rust-kh-ng-c-n-garbage-collector-">Rust khÃ´ng cáº§n Garbage Collector?</h2>
<p>ÄÃºng váº­y, Rust khÃ´ng cÃ³ <strong>garbage collector</strong> (GC), nhÆ°ng váº«n Ä‘áº£m báº£o Ä‘Æ°á»£c tÃ­nh an toÃ n vá» bá»™ nhá»›, Ä‘Ã¢y lÃ  má»™t trong nhá»¯ng chá»©c nÄƒng Ä‘áº·c biá»‡t cá»§a Rust.</p>
<p><img src="img/garbage-collector.png" alt=""></p>
<p>Thay vÃ o Ä‘Ã³, Rust Compiler sáº½ dá»± Ä‘oÃ¡n Ä‘Æ°á»£c khi nÃ o má»™t biáº¿n sáº½ háº¿t Ä‘Æ°á»£c sá»­ dá»¥ng vÃ  tá»± Ä‘á»™ng chÃ¨n thÃªm code logic Ä‘á»ƒ giáº£i phÃ³ng nÃ³, giáº£m thiá»ƒu chi phÃ­ cho viá»‡c quáº£n lÃ½ bá»™ nhá»› lÃºc runtime. </p>
<pre><code>fn main() {
    let score = 10; // Khá»Ÿi táº¡o vÃ¹ng nhá»› má»›i, cáº¥p phÃ¡t cho biáº¿n score
    // Tá»›i Ä‘Ã¢y lÃ  háº¿t scope cá»§a biáº¿n score, mÃ¬nh nÃªn giáº£i phÃ³ng nÃ³ Ä‘i thÃ´i 
}
</code></pre><p>Äoáº¡n trÃªn lÃ  diá»…n biáº¿n suy nghÄ© cá»§a Rust Compiler qua tá»«ng dÃ²ng code :))</p>
<p>VÃ  viá»‡c nÃ y Ä‘Æ°á»£c kiá»ƒm soÃ¡t thÃ´ng qua Ownership System.</p>
<p>Viá»‡c khÃ´ng cÃ³ GC cÃ²n giÃºp Rust cÃ³ thá»ƒ dá»… dÃ ng Ä‘Æ°á»£c <a href="http://calculist.org/blog/2015/12/23/neon-node-rust/">nhÃºng</a> vÃ o cÃ¡c ngÃ´n ngá»¯ cÃ³ GC khÃ¡c ná»¯a.</p>
<h2 id="d-ng-rust-c-th-l-m-c-g-">DÃ¹ng Rust cÃ³ thá»ƒ lÃ m Ä‘Æ°á»£c gÃ¬?</h2>
<p>ÄÃ¢y lÃ  cÃ¢u há»i mÃ  mÃ¬nh tháº¥y nhiá»u ngÆ°á»i há»i nháº¥t. </p>
<p>CÃ¢u tráº£ lá»i lÃ : <strong>Má»i thá»©!</strong></p>
<p>Máº·c dÃ¹ lÃ  má»™t ngÃ´n ngá»¯ láº­p trÃ¬nh há»‡ thá»‘ng (system programming language), nhÆ°ng Rust nháº¯m tá»›i viá»‡c cáº¡nh tranh vá»›i C/C++ Ä‘á»ƒ tÄƒng Ä‘á»™ an toÃ n vÃ  cáº£i thiá»‡n performance cho cÃ¡c pháº§n má»m Ä‘Æ°á»£c viáº¿t ra, vÃ¬ tháº¿ Rust cÃ³ thá»ƒ lÃ m Ä‘Æ°á»£c má»i thá»© mÃ  C/C++ lÃ m Ä‘Æ°á»£c, vÃ­ dá»¥:</p>
<ul>
<li><a href="http://os.phil-opp.com/">Viáº¿t há»‡ Ä‘iá»u hÃ nh</a></li>
<li><a href="https://github.com/kud1ing/awesome-rust#web-programming">Láº­p trÃ¬nh web</a></li>
<li><a href="https://github.com/kud1ing/awesome-rust#mobile">PhÃ¡t triá»ƒn mobile app</a></li>
<li><a href="https://github.com/jwilm/alacritty">Viáº¿t Terminal Emulator</a></li>
<li><a href="https://github.com/kud1ing/awesome-rust#machine-learning">Machine Learning</a></li>
<li><a href="https://github.com/kud1ing/awesome-rust#database">Viáº¿t Database</a></li>
<li><a href="https://github.com/bluejekyll/trust-dns">Viáº¿t DNS server</a></li>
<li><a href="https://github.com/servo/servo">Viáº¿t browser engine</a></li>
<li><a href="https://github.com/kud1ing/awesome-rust#applications-written-in-rust">Viáº¿t Giáº£ láº­p Playstation/NES/Gameboy/...</a></li>
<li><a href="https://github.com/kud1ing/awesome-rust#applications-written-in-rust">Viáº¿t Game</a></li>
<li><a href="https://github.com/kud1ing/awesome-rust#image-processing">Xá»­ lÃ½ áº£nh</a></li>
<li><a href="https://github.com/kud1ing/awesome-rust#network-programming">Láº­p trÃ¬nh máº¡ng</a></li>
<li>...</li>
</ul>
<h2 id="gi-b-t-u-h-c-rust-nh-th-n-o-">Giá» báº¯t Ä‘áº§u há»c Rust nhÆ° tháº¿ nÃ o?</h2>
<p><img src="img/rustconf-2016-illustrated-adventure-guide-22-638.jpg" alt=""></p>
<center style="font-size: 0.7em;">áº¢nh láº¥y tá»«: <a href="http://www.slideshare.net/LizBaillie/rustconf-2016-illustrated-adventure-guide-65894363">http://www.slideshare.net/LizBaillie/rustconf-2016-illustrated-adventure-guide-65894363</a></center>

<p>Äá»ƒ báº¯t Ä‘áº§u, cÃ¡c báº¡n cÃ³ thá»ƒ tham kháº£o má»™t sá»‘ tÃ i liá»‡u sau:</p>
<ul>
<li><a href="http://rustbyexample.com/">Rust by Example</a>: Trang web tá»•ng há»£p Ä‘áº§y Ä‘á»§ cÃ¡c vÃ­ dá»¥ tá»« Ä‘Æ¡n giáº£n Ä‘áº¿n phá»©c táº¡p Ä‘á»ƒ giÃºp báº¡n lÃ m quen vá»›i cÃº phÃ¡p vÃ  cÃ¡c kÄ© thuáº­t trong Rust.</li>
<li><a href="https://doc.rust-lang.org/book/">SÃ¡ch The Rust Programming Language</a>: ÄÃ¢y lÃ  cuá»‘n sÃ¡ch chÃ­nh thá»©c cá»§a Rust, trÃ¬nh bÃ y má»™t cÃ¡ch Ä‘áº§y Ä‘á»§ vÃ  chi tiáº¿t tá»« A-Z khi há»c Rust.</li>
<li><a href="http://www.slideshare.net/saneyuki/rusts-ownership-and-move-semantics">Slide Rust&#39;s Ownership and Move Semantics</a>: Má»™t slide khÃ¡ chi tiáº¿t trÃ¬nh bÃ y vá» Ownership System cá»§a Rust. </li>
</ul>
<p>NgoÃ i ra, cÃ¡c báº¡n cÃ³ thá»ƒ tham gia vÃ o cÃ¡c cá»™ng Ä‘á»“ng Rust nhÆ°:</p>
<ul>
<li><a href="https://users.rust-lang.org/">Diá»…n Ä‘Ã n</a>: Diá»…n Ä‘Ã n chÃ­nh thá»©c cá»§a Rust</li>
<li><a href="https://chat.mibbit.com/?server=irc.mozilla.org&amp;channel=%23rust-beginners">IRC</a>: KÃªnh IRC Ä‘á»ƒ há»i cÃ¡c váº¥n Ä‘á» khi há»c Rust</li>
<li><a href="https://this-week-in-rust.org/">Báº£n tin This Week in Rust</a>: NÆ¡i cáº­p nháº­t tin tá»©c hÃ ng tuáº§n vá» Rust, nhá»¯ng thÆ° viá»‡n má»›i, nhá»¯ng sá»± kiá»‡n sáº¯p diá»…n ra,...</li>
<li><a href="http://blog.rust-lang.org/">Rust Blog</a>: NÆ¡i core team cá»§a Rust Ä‘Æ°a ra cÃ¡c thÃ´ng bÃ¡o má»›i nháº¥t vá» ngÃ´n ngá»¯ nÃ y.</li>
<li><a href="https://www.reddit.com/r/rust">Reddit</a>: Subreddit vá» Rust</li>
</ul>
<p>For fun, báº¡n nÃªn biáº¿t má»™t sá»‘ tá»« vá»±ng nÃªn biáº¿t trÆ°á»›c khi gia nháº­p cá»™ng Ä‘á»“ng nÃ y :))</p>
<ul>
<li><strong>Rustacean</strong>: LÃ  tá»« chá»‰ nhá»¯ng ngÆ°á»i sá»­ dá»¥ng Rust, giá»‘ng nhÆ° <strong>Gophers</strong> hay <strong>Rubyist</strong> hay <strong>Alchemist</strong> (cá»§a Elixir).</li>
<li><strong>Rustlandia</strong>: LÃ  khu vá»±c mÃ  cÃ¡c rustaceans hoáº¡t Ä‘á»™ng, cÃ¡i nÃ y cháº¯c chá»‰ cÃ³ há»™i Rust má»›i cÃ³ :))</li>
</ul>
<p>NgoÃ i ra chÃºng ta cÅ©ng cÃ³ cá»™ng Ä‘á»“ng <strong>Rust Viá»‡t Nam</strong>:</p>
<ul>
<li><a href="https://rust-lang.vn">Trang web</a></li>
<li><a href="https://www.facebook.com/vietnam.rust/">Facebook Page</a></li>
<li><a href="https://github.com/rust-vietnam/">GitHub</a></li>
<li><a href="http://chat.ruby.org.vn/">Slack Chat</a>: Join vÃ o channel <a href="https://vietnamrb.slack.com/messages/rustlang/">#rustlang</a></li>
</ul>
<p>Háº¹n gáº·p láº¡i cÃ¡c báº¡n á»Ÿ Rustlandia!!!</p>
<div class='other-tags'><b>Tags:</b> <a class='topic-tag' href='https://huytd.github.io/tags/rust.html'>rust</a></div>
                <div class="copyright">
                Báº¡n Ä‘Æ°á»£c tÃ¹y Ã½ báº¥m like, trÃ­ch dáº«n hoáº·c copy, post láº¡i, nhÆ°ng vui lÃ²ng ghi rÃµ nguá»“n vÃ  tÃ¡c giáº£ vÃ  khÃ´ng lÃ m thay Ä‘á»•i ná»™i dung bÃ i viáº¿t. Náº¿u khÃ´ng lÃ m váº­y, mÃ¬nh hy vá»ng tá»« nay vá» sau báº¡n sáº½ luÃ´n cáº£m tháº¥y cáº¯n rá»©t lÆ°Æ¡ng tÃ¢m, Äƒn khÃ´ng ngon, ngá»§ khÃ´ng yÃªn. ğŸ˜†
                </div>
                <!-- Comment -->
                <div class="comments">
                  <div id="comment-loading" class="loading"></div>
                  <div id="login-box" class="login">
                    Báº¡n cáº§n <button onclick="login()">Login</button> Ä‘á»ƒ comment
                  </div>
                  <div id="comment-box" class="comment-input">
                    <div class="avatar">
                      <img id="user-avatar" src="" width="32" height="32"/>
                    </div>
                    <div class="input">
                      <textarea id="comment-content" onkeyup="autoSizing(this)" onkeydown="submitComment(event)" placeholder="Comment gÃµ vÃ o Ä‘Ã¢y :D"></textarea>
                      <span>GÃµ xong nháº¥n <kbd>Ctrl</kbd> + <kbd>Enter</kbd> Ä‘á»ƒ gá»­i.</span>
                    </div>
                  </div>
                  <ul id="comment-list" class="comment-list"></ul>
                </div>
                <!-- End Comment -->
            </div>
        </div>
	    <div class="footer">
            <p>Created with <a href="http://github.com/huytd/azeroth-js">azeroth.js</a></p>
            <div class="social">
                <a target="_blank" href="http://facebook.com/kingbazoka"><i class="icon-facebook-squared"></i></a>
                <a target="_blank" href="http://twitter.com/huydotnet"><i class="icon-twitter-squared"></i></a>
                <a target="_blank" href="http://github.com/huytd"><i class="icon-github-squared"></i></a>
                <a target="_blank" href="https://thefullsnack.com"><i class="icon-emo-coffee"></i></a>
            </div>
        </div>
        <script type="text/javascript" async src="https://cdn.rawgit.com/mathjax/MathJax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
        <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
          tex2jax: {
            inlineMath: [['$','$'], ['\\(','\\)']],
            skipTags: ["script","noscript","style","textarea"]
          }
        });
        </script>
        <script src="https://www.gstatic.com/firebasejs/3.8.0/firebase.js"></script>
        <script>
          // Initialize Firebase
          var config = {
            apiKey: "AIzaSyA1PnIAlJJ-U6iQJMNnCOknBuziBqGMYcY",
            authDomain: "huys-blog-comment.firebaseapp.com",
            databaseURL: "https://huys-blog-comment.firebaseio.com",
            projectId: "huys-blog-comment",
            storageBucket: "huys-blog-comment.appspot.com",
            messagingSenderId: "317330376829"
          };
          firebase.initializeApp(config);
        </script>
        <script>
          let provider = new firebase.auth.GoogleAuthProvider();
          let auth = firebase.auth();
          let currentUser = null;
          let postCommentURL = 'posts/rust-intro/comments';

          auth.onAuthStateChanged(function(user) {
            document.getElementById("comment-loading").style.display = "none";
            if (user) {
              currentUser = user;
              // Logged in
              document.getElementById("login-box").style.display = "none";
              document.getElementById("comment-box").style.display = "flex";
              document.getElementById("user-avatar").setAttribute("src", user.photoURL);
            } else {
              // Not login yet
              document.getElementById("comment-box").style.display = "none";
              document.getElementById("login-box").style.display = "block";
            }
          });

          const login = function() {
            auth.signInWithPopup(provider)
              .then(function(result) {
              }).catch(function(err) {
              });
          };

          const encodeHTML = function(s) {
            return s.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/"/g, '&quot;');
          };

          const saveNewComment = function(comment) {
            if (!currentUser) {
              return;
            }
            let commentData = {
              user: currentUser.displayName,
              avatar: currentUser.photoURL,
              time: (new Date()).toISOString(),
              message: encodeHTML(comment)
            };
            database.ref(postCommentURL).push(commentData);
            document.getElementById("comment-content").value = "";
          };

          const submitComment = function(e) {
            let keyCode = e.which || e.keyCode;
            let ctrlCode = e.ctrlKey || e.metaKey;
            if (keyCode === 13 && ctrlCode) {
              let comment = document.getElementById("comment-content").value;
              saveNewComment(comment);
            }
          };

          const addNewComment = function(user, avatar, time, comment) {
            let commentFiltered = encodeHTML(comment);
            let d = new Date(time);
            let commentTime = d.toLocaleTimeString() + ' ' + d.toLocaleDateString();
            let html = '<div class="avatar">' +
              '   <img src="' + avatar + '" width="32" height="32"/>' +
              ' </div>' +
              '<div class="comment">' +
              '  <div class="metadata"><b>' + user + '</b> lÃºc <span>' + commentTime + '</span></div>' +
              '  <div class="content">' + commentFiltered
              '  </div>' +
              '</div>';
            let li = document.createElement('li');
            li.innerHTML = html;
            document.getElementById("comment-list").append(li);
          };

          let database = firebase.database();
          let posts = database.ref(postCommentURL).orderByChild('time');
          posts.on('child_added', function(data) {
            addNewComment(data.val().user, data.val().avatar, data.val().time, data.val().message);
          });
        </script>
    </body>
</html>
