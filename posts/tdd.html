<html>
    <head>
        <title> TDD qua vÃ­ dá»¥ thá»±c táº¿ | Huy's Blog</title>
        <meta charset="utf-8">
        <meta http-equiv="content-type" content="text/html;"><meta name=viewport content="initial-scale=1.0 maximum-scale=1.0">
        
        <link href="../css/inconsolata.css" rel="stylesheet" type="text/css">
        <link href="../css/theme.css" rel="stylesheet" type="text/css">
        <link rel="stylesheet" href="../css/highlight/tomorrow.css">
        <link rel="stylesheet" href="../css/fontello.css">
        <script src="../js/highlight.pack.js"></script>
        <script>
        hljs.initHighlightingOnLoad();
        </script>
    </head>
    <body>
        <div class="header">
            <a href="/"><i class="icon icon-emo-coffee"></i> Huy's Blog</a>
        </div>
        <div class="container">
            <div class="main">
                <h1 id="tdd-qua-v-d-th-c-t-">TDD qua vÃ­ dá»¥ thá»±c táº¿</h1>
<p>TDD (Test Driven Development) - tá»©c lÃ  má»™t phÆ°Æ¡ng phÃ¡p láº­p trÃ¬nh chÃº trá»ng vÃ o viá»‡c test, &quot;viáº¿t test trÆ°á»›c viáº¿t code sau&quot;,... ráº¥t nhiá»u ngÆ°á»i Ä‘Ã£ thá»­ tÃ¬m hiá»ƒu vá» TDD vÃ  Ä‘á»u Ä‘á»c Ä‘Æ°á»£c nhá»¯ng Ä‘á»‹nh nghÄ©a nhÆ° tháº¿ nÃ y trong cÃ¡c bÃ i viáº¿t, nhÆ°ng cuá»‘i cÃ¹ng khi Ä‘á»c xong thÃ¬ váº«n khÃ´ng hiá»ƒu ná»•i TDD lÃ  gÃ¬.</p>
<p>Má»™t trong nhá»¯ng cÃ¢u há»i Ä‘Æ°á»£c Ä‘áº·t ra nhiá»u nháº¥t khi nghiÃªn cá»©u vá» TDD cÃ³ láº½ lÃ : <strong>Ãp dá»¥ng TDD nhÆ° tháº¿ nÃ o trong thá»±c táº¿?</strong> </p>
<p><img src="http://www.seleniumframework.com/wp-content/uploads/2014/10/TestDrivenDevelopment_155FE5992.png" alt=""></p>
<p>VÃ  hÃ¬nh nhÆ° cÅ©ng khÃ´ng cÃ³ nhiá»u bÃ i viáº¿t giáº£i Ä‘Ã¡p Ä‘Æ°á»£c cÃ¢u há»i nÃ y. Káº¿t quáº£ lÃ  ráº¥t nhiá»u ngÆ°á»i khÃ´ng hiá»ƒu Ä‘Æ°á»£c nÃ³ nÃªn khÃ´ng Ã¡p dá»¥ng Ä‘Æ°á»£c hoáº·c Ã¡p dá»¥ng sai cÃ¡ch, tá»« Ä‘Ã³ táº¡o ra nhá»¯ng hiá»ƒu láº§m hay &quot;áº£o tÆ°á»Ÿng sá»©c máº¡nh&quot; vá» nÃ³, ráº¥t lÃ  tai háº¡i.</p>
<p>Váº­y tháº¿ nÃ o lÃ  TDD? VÃ  tháº¿ nÃ o má»›i lÃ  hiá»ƒu Ä‘Ãºng vá» TDD? MÃ¬nh xin khÃ´ng tráº£ lá»i trá»±c tiáº¿p, mÃ  sáº½ trÃ¬nh bÃ y má»™t vÃ­ dá»¥ minh há»a Ã¡p dá»¥ng TDD Ä‘á»ƒ qua Ä‘Ã³ cÃ¡c báº¡n cÃ³ thá»ƒ tá»± rÃºt ra Ä‘Æ°á»£c cÃ¢u tráº£ lá»i cÅ©ng nhÆ° quyáº¿t Ä‘á»‹nh xem cÃ³ nÃªn Ã¡p dá»¥ng nÃ³ hay khÃ´ng :D CÃ²n bÃ¢y giá» thÃ¬ chÃºng ta báº¯t Ä‘áº§u thÃ´i.</p>
<h2 id="b-i-to-n-fizzbuzz">BÃ i toÃ¡n FizzBuzz</h2>
<p>Äá»ƒ minh há»a viá»‡c Ã¡p dá»¥ng TDD trong thá»±c táº¿, mÃ¬nh sáº½ Ã¡p dá»¥ng nÃ³ vÃ o viá»‡c xÃ¢y dá»±ng má»™t chÆ°Æ¡ng trÃ¬nh Ä‘Æ¡n giáº£n cÃ³ tÃªn lÃ  <strong>FizzBuzz</strong>.</p>
<p>Náº¿u cÃ¡c báº¡n chÆ°a biáº¿t, thÃ¬ FizzBuzz lÃ  má»™t hÃ m nháº­n vÃ o má»™t sá»‘ <strong>N</strong> vÃ  tráº£ vá» cÃ¡c giÃ¡ trá»‹ khÃ¡c nhau tÃ¹y theo tá»«ng Ä‘iá»u kiá»‡n:</p>
<ul>
<li>Tráº£ vá» chuá»—i <strong>&quot;Fizz&quot;</strong> náº¿u sá»‘ <strong>N</strong> chia háº¿t cho <strong>3</strong> (vÃ­ dá»¥ 3, 6, 9,...)</li>
<li>Tráº£ vá» chuá»—i <strong>&quot;Buzz&quot;</strong> náº¿u sá»‘ <strong>N</strong> chia háº¿t cho <strong>5</strong> (vÃ­ dá»¥ 5, 10,...)</li>
<li>Tráº£ vá» chuá»—i <strong>&quot;FizzBuzz&quot;</strong> náº¿u sá»‘ <strong>N</strong> chia háº¿t cho cáº£ <strong>3</strong> vÃ  <strong>5</strong> (vÃ­ dá»¥ 15, 45,...)</li>
<li>Tráº£ vá» chÃ­nh con sá»‘ Ä‘Ã³ náº¿u nÃ³ khÃ´ng thá»a mÃ£n cÃ¡c Ä‘iá»u kiá»‡n trÃªn</li>
</ul>
<p>Sá»¡ dÄ© mÃ¬nh chá»n bÃ i toÃ¡n nÃ y Ä‘á»ƒ minh há»a cho TDD lÃ  vÃ¬ nÃ³ cá»±c kÃ¬ Ä‘Æ¡n giáº£n mÃ  láº¡i cÃ³ nhiá»u case tÃ¹y thuá»™c vÃ o tá»«ng input, khÃ´ng quÃ¡ khÃ³ Ä‘á»ƒ hiá»ƒu vÃ  cover Ä‘Æ°á»£c toÃ n bá»™ cÃ¡c case trong pháº¡m vi 1 bÃ i viáº¿t ngáº¯n nhÆ° tháº¿ nÃ y.</p>
<h2 id="implement-b-i-to-n-fizzbuzz-p-d-ng-tdd">Implement bÃ i toÃ¡n FizzBuzz Ã¡p dá»¥ng TDD</h2>
<p>Rá»“i, giá» thÃ¬ chÃºng ta Ä‘Ã£ hiá»ƒu Ä‘á» bÃ i, váº­y thÃ¬ báº¯t tay vÃ o code thÃ´i. Trong bÃ i nÃ y mÃ¬nh sáº½ sá»­ dá»¥ng <strong>Ruby</strong> vÃ  <strong>Minitest</strong> Ä‘á»ƒ implement vÃ  test. Náº¿u láº§n Ä‘áº§u tiÃªn nghe nÃ³i Ä‘áº¿n 2 cÃ¡i nÃ y thÃ¬ cÃ¡c báº¡n chá»‹u khÃ³ tÃ¬m Ä‘á»c qua má»™t chÃºt trÆ°á»›c khi chÃºng ta tiáº¿p tá»¥c. Nháº¥t lÃ  Minitest, cÃ²n Ruby thÃ¬ code cá»§a nÃ³ cÅ©ng khÃ´ng Ä‘áº¿n ná»—i quÃ¡ phá»©c táº¡p nÃªn dÃ¹ báº¡n code Java hay JavaScript thÃ¬ Ä‘á»c vÃ o cháº¯c cÅ©ng sáº½ hiá»ƒu :trollface:</p>
<h3 id="chu-n-b-h-nh-l-">Chuáº©n bá»‹ hÃ nh lÃ½</h3>
<p>RÃµ rÃ ng khi báº¯t Ä‘áº§u code thÃ¬ pháº£i setup nhá»¯ng thá»© nhÆ° lÃ  cáº¥u trÃºc thÆ° má»¥c blah blah. NhÆ°ng pháº§n nÃ y khÃ´ng liÃªn quan Ä‘áº¿n TDD, nÃªn mÃ¬nh sáº½ nÃ³i lÆ°á»›t qua. Náº¿u cÃ¡c báº¡n khÃ´ng hiá»ƒu thÃ¬ cÃ³ thá»ƒ há»i trong pháº§n comment nhÃ©. </p>
<p>Táº¡o má»™t thÆ° má»¥c dÃ nh cho project cá»§a chÃºng ta, cÃ³ thá»ƒ Ä‘áº·t tÃªn tÃ¹y Ã½, trong Ä‘Ã³ táº¡o 3 file láº§n lÆ°á»£t nhÆ° sau: <strong>Rakefile</strong>, <strong>FizzBuzz.rb</strong> vÃ  <strong>FizzBuzz_test.rb</strong></p>
<p><strong>Rakefile</strong> cÃ³ nhiá»‡m vá»¥ Ä‘á»‹nh nghÄ©a task cháº¡y test, cÃ³ ná»™i dung nhÆ° sau:</p>
<pre><code>require &quot;rake/testtask&quot;

Rake::TestTak.new(:test) do |t|
  t.libs &lt;&lt; &quot;test&quot;
  t.test_files = FileList[&quot;*_test.rb&quot;]
  t.verbose = true
end

task :default =&gt; :test
</code></pre><p>ChÃºng ta sáº½ implement module <strong>FizzBuzz</strong>, trong module nÃ y cÃ³ 1 hÃ m <strong>run()</strong> nháº­n vÃ o tham sá»‘ N vÃ  tráº£ vá» cÃ¡c giÃ¡ trá»‹ nhÆ° Ä‘Ã£ nÃ³i á»Ÿ pháº§n khÃ¡i niá»‡m. ÄÃ¢y lÃ  pháº§n sÆ°á»n code cho module <strong>FizzBuzz</strong>, náº±m trong file <strong>FizzBuzz.rb</strong> </p>
<pre><code>module FizzBuzz
  extend self

  def run(n)

  end
end
</code></pre><p>Pháº§n code test sáº½ Ä‘áº·t trong file <strong>FizzBuzz_test.rb</strong> vÃ  cÃ³ ná»™i dung nhÆ° sau:</p>
<pre><code>require &quot;minitest/autorun&quot;
require &quot;./FizzBuzz&quot;

class FizzBuzzTest &lt; Minitest::Test

end
</code></pre><p>Sau khi táº¡o xong 3 file trÃªn, cÃ¡c báº¡n cÃ³ thá»ƒ cháº¡y thá»­ test báº±ng lá»‡nh:</p>
<pre><code>rake test

# hoáº·c lÃ 

rake
</code></pre><p>Output sáº½ nhÆ° tháº¿ nÃ y:</p>
<pre><code># Running:



Finished in 0.001125s, 0.0000 runs/s, 0.0000 assertions/s.

0 runs, 0 assertions, 0 failures, 0 errors, 0 skips
</code></pre><p>Output nhÆ° trÃªn nghÄ©a lÃ  báº¡n Ä‘Ã£ cÃ i Ä‘áº·t thÃ nh cÃ´ng chÆ°Æ¡ng trÃ¬nh, nhÆ°ng chÆ°a cÃ³ test case nÃ o Ä‘Æ°á»£c cháº¡y.</p>
<p>Giá» chÃºng ta sáº½ báº¯t tay vÃ o pháº§n chÃ­nh, test vÃ  code.</p>
<h3 id="ch-ch-t-">Chá» chÃºt!</h3>
<p>Ã€, mÃ  trÆ°á»›c khi báº¯t Ä‘áº§u thÃ¬ cÅ©ng nÃªn nháº¯c láº¡i má»™t tÃ­ vá» TDD. TDD tá»©c lÃ  &quot;viáº¿t test trÆ°á»›c khi viáº¿t code&quot;. NghÄ©a lÃ  sao? ChÆ°a cÃ³ code thÃ¬ lÃ m sao mÃ  test? </p>
<p>ÄÃ¢y chÃ­nh lÃ  máº¥u chá»‘t, khi báº¡n Ä‘á»‹nh implement má»™t function nÃ o Ä‘Ã³, báº¡n sáº½ pháº£i viáº¿t má»™t function khÃ¡c, sá»­ dá»¥ng chÃ­nh cÃ¡i function báº¡n Ä‘á»‹nh implement, vÃ  khi cháº¡y test táº¥t nhiÃªn nÃ³ sáº½ fail, Ä‘Æ¡n giáº£n lÃ  vÃ¬ báº¡n chÆ°a implement cÃ¡i gÃ¬ cáº£. VÃ¬ váº­y viá»‡c tiáº¿p theo lÃ  implement Ä‘á»ƒ lÃ m cho nÃ³ háº¿t fail (pass). Cuá»‘i cÃ¹ng, bá» chÃºt thá»i gian ra refactor láº¡i code cho Ä‘áº¹p vÃ  gá»n gÃ ng hÆ¡n, Ä‘á»ƒ lá»¡ cÃ³ bá»‹ ai Ä‘á»c vÃ o thÃ¬ há» cÅ©ng khÃ´i cÃ³ chá»­i Ä‘Æ°á»£c mÃ¬nh =))))</p>
<p><img src="http://luizricardo.org/wordpress/wp-content/upload-files/2014/05/tdd_flow.gif" alt=""></p>
<p>VÃ  báº±ng cÃ¡ch suy nghÄ© trÆ°á»›c má»i tÃ¬nh huá»‘ng cÃ³ thá»ƒ xáº£y ra khi sá»­ dá»¥ng cÃ¡i function báº¡n sáº¯p viáº¿t, sau khi toÃ n bá»™ test Ä‘Ã£ pass thÃ¬ báº¡n cÃ³ má»™t function hoÃ n háº£o vÃ  khÃ´ng cÃ²n kháº£ nÄƒng xáº£y ra bug ná»¯a. </p>
<p>Quay trá»Ÿ láº¡i bÃ i toÃ¡n, chÃºng ta sáº½ cÃ³ bao nhiÃªu tÃ¬nh huá»‘ng cáº§n nghÄ© ra Ä‘á»ƒ test? Báº¡n thá»­ tá»± tráº£ lá»i trÆ°á»›c khi Ä‘á»c tiáº¿p xem?</p>
<p>CÃ¢u tráº£ lá»i lÃ  <strong>4</strong>. CÅ©ng chÃ­nh lÃ  4 gáº¡ch Ä‘áº§u dÃ²ng mÃ´ táº£ hÃ m <strong>FizzBuzz</strong> Ä‘Ã£ ghi á»Ÿ trÃªn. Táº¥t nhiÃªn náº¿u mÃ¡u thÃ¬ báº¡n cÃ³ thá»ƒ viáº¿t nhiá»u test case hÆ¡n cho nÃ³ cÅ©ng Ä‘Æ°á»£c, nhÆ°ng náº¿u báº¡n viáº¿t quÃ¡ nhiá»u test case thÃ¬ ráº¥t cÃ³ thá»ƒ báº¡n Ä‘ang viáº¿t thá»«a rá»“i (tá»©c lÃ  sáº½ cÃ³ cÃ¡c test case test cÃ¹ng má»™t váº¥n Ä‘á»).</p>
<p>CÃ¡c báº¡n tháº¥y sao? Tui nÃ³i nhiá»u quÃ¡ háº£? Ã€ khÃ´ng, TDD lá»£i háº¡i quÃ¡ háº£? ThÃ´i báº¯t Ä‘áº§u nhÃ©, giá» chÃºng ta test cÃ¡i case Ä‘áº§u tiÃªn nhÃ©.</p>
<h3 id="test-case-1-nh-n-v-o-m-t-s-chia-h-t-cho-3-tr-v-chu-i-fizz">Test case #1: Nháº­n vÃ o má»™t sá»‘ chia háº¿t cho 3, tráº£ vá» chuá»—i Fizz</h3>
<p>Xem nÃ o, nhÆ° Ä‘Ã£ nÃ³i á»Ÿ pháº§n trÃªn kia thÃ¬ chÃºng ta sáº½ gá»i hÃ m <code>FizzBuzz.run(...)</code>, vá»›i tham sá»‘ <strong>n</strong> truyá»n vÃ o cho hÃ m <code>run</code> lÃ  má»™t con sá»‘ chia háº¿t cho 3, vÃ­ dá»¥ nhÆ° lÃ  sá»‘ 6, hoáº·c 9. VÃ  káº¿t quáº£ thu Ä‘Æ°á»£c sáº½ lÃ  má»™t chuá»—i <strong>&quot;Fizz&quot;</strong>.</p>
<h4 id="vi-t-test-tr-c-">Viáº¿t test trÆ°á»›c...</h4>
<p>Váº­y thÃ¬ test case Ä‘áº§u tiÃªn cá»§a chÃºng ta sáº½ nhÆ° tháº¿ nÃ y:</p>
<p><strong>FizzBuzz_test.rb</strong> </p>
<pre><code>def test_fizzbuzz_run_return_fizz
  expect = &quot;Fizz&quot;
  actual = FizzBuzz.run(6)
  assert_equal expect, actual
end
</code></pre><p>Äáº·t tÃªn hÃ m cÃ³ dáº¡ng <code>test_xxx</code> lÃ  do Minitest quy Ä‘á»‹nh, vÃ  Ä‘á»ƒ cho rÃµ rÃ ng thÃ¬ pháº§n <code>xxx</code> trong tÃªn hÃ m test chÃºng ta nÃªn diá»…n Ä‘áº¡t ná»™i dung hoáº·c má»¥c Ä‘Ã­ch cá»§a test case nÃ y, á»Ÿ Ä‘Ã¢y lÃ : <em>FizzBuzz Run Return Fizz</em>, cÃ³ nghÄ©a lÃ : <em>HÃ m <code>run</code> cá»§a module <code>FizzBuzz</code> sáº½ tráº£ vá» ná»™i dung Fizz</em>.</p>
<p>Viá»‡c khai bÃ¡o 2 biáº¿n <code>expect</code> vÃ  <code>actual</code> lÃ  Ä‘á»ƒ cho pháº§n code test nÃ y dá»… Ä‘á»c hÆ¡n thÃ´i, trong thá»±c táº¿ cÃ¡c báº¡n cÃ³ thá»ƒ bá» náº¿u khÃ´ng thÃ­ch. Tuy nhiÃªn tiÃªu chÃ­ lÃ : Code test thÃ¬ pháº£i luÃ´n luÃ´n rÃµ rÃ ng.</p>
<p>Lá»‡nh <code>assert_equal</code> cÅ©ng lÃ  cá»§a Minitest, cÃ³ nhiá»‡m vá»¥ kiá»ƒm tra xem giÃ¡ trá»‹ cá»§a 2 tham sá»‘ <code>expect</code> vÃ  <code>actual</code> cÃ³ báº±ng nhau khÃ´ng. NgoÃ i ra cÃ²n cÃ³ nhiá»u phÃ©p assertion khÃ¡c, cÃ¡c báº¡n cÃ³ thá»ƒ Ä‘á»c thÃªm <a href="http://docs.seattlerb.org/minitest/Minitest/Assertions.html">táº¡i Ä‘Ã¢y</a></p>
<p>Giá» cháº¡y test thá»­ nhÃ©, báº£o Ä‘áº£m nÃ³ báº¯n lá»—i ngay:</p>
<pre><code># Running:

F

Finished in 0.001543s, 2592.3526 runs/s, 2592.3526 assertions/s.

  1) Failure:
FizzBuzzTest#test_fizzbuzz_run_return_fizz [...]:
Expected: &quot;Fizz&quot;
  Actual: nil

1 runs, 1 assertions, 1 failures, 0 errors, 0 skips
rake aborted!
</code></pre><p>Ná»™i dung thÃ´ng bÃ¡o trÃªn cÃ³ nghÄ©a lÃ , káº¿t quáº£ mong Ä‘á»£i lÃ  <strong>&quot;Fizz&quot;</strong> nhÆ°ng káº¿t quáº£ thá»±c táº¿ láº¡i lÃ  <strong>nil</strong> (null, vÃ¬ chÆ°a implement láº¥y Ä‘Ã¢u ra cÃ³ káº¿t quáº£).</p>
<h4 id="-vi-t-code-sau">...Viáº¿t code sau</h4>
<p>Test cÅ©ng viáº¿t rá»“i, fail cÅ©ng fail luÃ´n rá»“i, giá» lÃ  lÃºc lÃ m cho cÃ¡i test kia xanh trá»Ÿ láº¡i (pass), báº±ng cÃ¡ch implement trÆ°á»ng há»£p Ä‘áº§u tiÃªn cho hÃ m <code>run</code> nhÆ° Ä‘oáº¡n code dÆ°á»›i Ä‘Ã¢y:</p>
<p><strong>FizzBuzz.rb</strong></p>
<pre><code>def run(n)
  if n % 3 == 0
    return &quot;Fizz&quot; 
  end
end
</code></pre><p>QuÃ¡ Ä‘Æ¡n giáº£n! Giá» cháº¡y test láº¡i thá»­ xem nhÃ©:</p>
<pre><code># Running:

.

Finished in 0.001766s, 566.2514 runs/s, 566.2514 assertions/s.

1 runs, 1 assertions, 0 failures, 0 errors, 0 skips
</code></pre><p>Ngon! Ghi váº­y tá»©c lÃ  pass rá»“i Ä‘Ã³. Giá» Ä‘áº¿n pháº§n refactor, cÆ¡ mÃ  vÃ¬ cÃ¡i hÃ m nÃ y cÅ©ng Ä‘Æ¡n giáº£n quÃ¡ nÃªn thÃ´i mÃ¬nh bá» qua bÆ°á»›c nÃ y váº­y.</p>
<p>Giá» qua test case thá»© 2 nhÃ©.</p>
<h3 id="test-case-2-nh-n-v-o-m-t-s-chia-h-t-cho-5-tr-v-chu-i-buzz">Test case #2: Nháº­n vÃ o má»™t sá»‘ chia háº¿t cho 5, tráº£ vá» chuá»—i Buzz</h3>
<p>TrÆ°á»ng há»£p thá»© 2 lÃ  hÃ m <code>run()</code> nháº­n vÃ o má»™t sá»‘ <strong>n</strong> chia háº¿t cho 5 (nhÆ°ng nhá»› lÃ  khÃ´ng chia háº¿t cho 3 nhÃ©), vÃ­ dá»¥ 5, 10, 20,... vÃ  nÃ³ sáº½ pháº£i tráº£ vá» káº¿t quáº£ lÃ  chuá»—i <strong>&quot;Buzz&quot;</strong>. </p>
<h4 id="vi-t-test-tr-c-">Viáº¿t test trÆ°á»›c...</h4>
<p>Váº­y thÃ¬ hÃ m test thá»© 2 sáº½ nhÆ° sau:</p>
<p><strong>FizzBuzz_test.rb</strong></p>
<pre><code>def test_fizzbuzz_run_return_buzz
  expect = &quot;Buzz&quot;
  actual = FizzBuzz.run(10)
  assert_equal expect, actual
end
</code></pre><p>Cháº¡y thá»­ luÃ´n cho nÃ³ fail:</p>
<pre><code># Running:

F.

Finished in 0.001374s, 1455.6041 runs/s, 1455.6041 assertions/s.

  1) Failure:
FizzBuzzTest#test_fizzbuzz_run_return_buzz [/Users/huy/Desktop/Code/rbfizzbuzz/FizzBuzz_test.rb:14]:
Expected: &quot;Buzz&quot;
  Actual: nil

2 runs, 2 assertions, 1 failures, 0 errors, 0 skips
rake aborted!
</code></pre><p>Output nhÆ° trÃªn cÃ³ nghÄ©a lÃ  cháº¡y 2 test case mÃ  cÃ³ 1 cÃ¡i fail. Káº¿t quáº£ mong Ä‘á»£i cá»§a cÃ¡i test fail lÃ  <strong>&quot;Buzz&quot;</strong> cÃ²n output thÃ¬ láº¡i lÃ  <strong>nil</strong>. VÃ¬ chÃºng ta chÆ°a implement trÆ°á»ng há»£p sá»‘ chia háº¿t cho 5 mÃ  ko chia háº¿t cho 3, nÃªn nÃ³ ko cÃ³ return cÃ¡i gÃ¬ vá» cáº£.</p>
<h4 id="-vi-t-code-sau">...Viáº¿t code sau</h4>
<p>ChÃºng ta implement trÆ°á»ng há»£p nÃ y nhÆ° sau:</p>
<p><strong>FizzBuzz.rb</strong></p>
<pre><code>def run(n)
  if n % 3 == 0
    return &quot;Fizz&quot;
  elsif n % 5 == 0
    return &quot;Buzz&quot;
  end
end
</code></pre><p>Giá» thÃ¬ cháº¡y thá»­ coi nÃ³ pass chÆ°a nÃ o:</p>
<pre><code># Running:

..

Finished in 0.001176s, 1700.6803 runs/s, 1700.6803 assertions/s.

2 runs, 2 assertions, 0 failures, 0 errors, 0 skips
</code></pre><p>Ngon lÃ nh! Äi tiáº¿p nÃ o.</p>
<h3 id="test-case-3-nh-n-v-o-m-t-s-c-ng-chia-h-t-cho-3-v-5-tr-v-chu-i-fizzbuzz">Test case #3: Nháº­n vÃ o má»™t sá»‘ cÃ¹ng chia háº¿t cho 3 vÃ  5, tráº£ vá» chuá»—i FizzBuzz</h3>
<p>TrÆ°á»ng há»£p thá»© 3 lÃ  cháº¡y hÃ m <code>run()</code> vá»›i input lÃ  má»™t sá»‘ <strong>n</strong> cÃ¹ng chia háº¿t cho <strong>3</strong> vÃ  <strong>5</strong>, vÃ­ dá»¥ nhÆ° lÃ  15, 30, 45,...</p>
<h4 id="vi-t-test-tr-c-">Viáº¿t test trÆ°á»›c...</h4>
<p>Váº«n nhÆ° cÃ¡c bÆ°á»›c trÃªn, cÃ³ váº» hÆ¡i chÃ¡n rá»“i nhá»‰ :laughing: </p>
<p><strong>FizzBuzz_test.rb</strong></p>
<pre><code>def test_fizzbuzz_run_return_fizzbuzz
  expect = &quot;FizzBuzz&quot;
  actual = FizzBuzz.run(15)
  assert_equal expect, actual
end
</code></pre><p>Cháº¡y cho nÃ³ fail nÃ o... :sleeping: </p>
<pre><code># Running:

.F.

Finished in 0.001382s, 2170.7670 runs/s, 2170.7670 assertions/s.

  1) Failure:
FizzBuzzTest#test_fizzbuzz_run_return_fizzbuzz [...]:
Expected: &quot;FizzBuzz&quot;
  Actual: &quot;Fizz&quot;

3 runs, 3 assertions, 1 failures, 0 errors, 0 skips
rake aborted!
</code></pre><p>OK lá»—i rá»“i. Giá» implement nÃ o, mÃ  khoan, sao láº§n nÃ y giÃ¡ trá»‹ actual khÃ´ng pháº£i <strong>nil</strong> mÃ  lÃ  <strong>Fizz</strong> nhá»‰. ThÃ´i ká»‡. Bá» qua.</p>
<h4 id="-vi-t-code-sau">...Viáº¿t code sau</h4>
<p>Váº­y lÃ  giá» chÃºng ta pháº£i implement cho trÆ°á»ng há»£p cÃ¹ng chia háº¿t cho cáº£ <strong>3</strong> vÃ  <strong>5</strong>. LÃ m nhÆ° tháº¿ nÃ o nhá»‰?</p>
<p><strong>FizzBuzz.rb</strong></p>
<pre><code>def run(n)
  if n % 3 == 0
    return &quot;Fizz&quot;
  elsif n % 5 == 0
    return &quot;Buzz&quot;
  elsif n % 3 == 0 &amp;&amp; n % 5 == 0
    return &quot;FizzBuzz&quot;
  end
end
</code></pre><p>Ngon lÃ nh chÆ°a? Hmm, hÃ¬nh nhÆ° cÃ³ gÃ¬ Ä‘Ã³ ko Ä‘Ãºng láº¯m, thÃ´i ká»‡, cháº¯c lo xa quÃ¡ thÃ´i, test nÃ o.</p>
<pre><code># Running:

.F.

Finished in 0.001588s, 1889.1688 runs/s, 1889.1688 assertions/s.

  1) Failure:
FizzBuzzTest#test_fizzbuzz_run_return_fizzbuzz [/Users/huy/Desktop/Code/rbfizzbuzz/FizzBuzz_test.rb:20]:
Expected: &quot;FizzBuzz&quot;
  Actual: &quot;Fizz&quot;

3 runs, 3 assertions, 1 failures, 0 errors, 0 skips
rake aborted!
</code></pre><p>á»š, váº«n lá»—i. Sao kÃ¬ záº©y, rÃµ rÃ ng lÃ  fail nÃ¨. Implement rá»“i mÃ  fail lÃ  sao ta. Xem nÃ o, nÃ³ fail vÃ¬ actual tráº£ vá» <strong>&quot;Fizz&quot;</strong>, kÃ¬ láº¡... CÃ³ gÃ¬ Ä‘Ã³ sai rá»“i, cÃ¹ng xem láº¡i code nÃ o.</p>
<p>Äáº§u tiÃªn chÃºng ta check coi sá»‘ n cÃ³ chia háº¿t cho 3 khÃ´ng <code>n % 3 == 0</code>, sau Ä‘Ã³ check coi n cÃ³ chia háº¿t cho 5 khÃ´ng <code>n % 5 == 0</code>. Ã€ Ä‘Ãºng rá»“i, váº­y lÃ  nÃ³ há»‘t luÃ´n cáº£ 2 trÆ°á»ng há»£p chia háº¿t cho 3 vÃ  5 rá»“i, cho nÃªn trÆ°á»ng há»£p cÃ¹ng chia háº¿t cho cáº£ 3 vÃ  5 thÃ¬ khÃ´ng thá»ƒ nÃ o mÃ  náº±m á»Ÿ dÆ°á»›i cÃ¹ng nhÆ° váº­y Ä‘Æ°á»£c.</p>
<p>Váº­y cÃ¡ch giáº£i quyáº¿t lÃ  ngay tá»« Ä‘áº§u chÃºng ta pháº£i kiá»ƒm tra trÆ°á»ng há»£p cÃ¹ng chia háº¿t cho 3 vÃ  5 trÆ°á»›c.</p>
<p><strong>FizzBuzz.rb</strong></p>
<pre><code>def run(n)
  if n % 3 == 0 &amp;&amp; n % 5 == 0
    return &quot;FizzBuzz&quot;
  elsif n % 3 == 0
    return &quot;Fizz&quot;
  elsif n % 5 == 0
    return &quot;Buzz&quot;
  end
end
</code></pre><p>ÄÃ³, lÃ m váº­y má»›i Ä‘Ãºng, giá» cháº¡y test láº¡i coi nÃ o:</p>
<pre><code># Running:

...

Finished in 0.001329s, 2257.3363 runs/s, 2257.3363 assertions/s.

3 runs, 3 assertions, 0 failures, 0 errors, 0 skips
</code></pre><p>ÄÃ³! Pass rá»“i tháº¥y chÆ°a? Vá»«a rá»“i khÃ´ng pháº£i lÃ  tui gÃ  Ä‘Ã¢u nha, tui cá»‘ tÃ¬nh sai cho máº¥y báº¡n khá»i bá»‹ máº¥t táº­p trung Ä‘Ã³ :trollface: nhá»› Ä‘Ã³ nha, khÃ´ng pháº£i do tui gÃ  Ä‘Ã¢u Ä‘Ã³ :chicken: </p>
<h3 id="test-case-4-nh-n-v-o-m-t-s-kh-ng-chia-h-t-cho-3-hay-5-g-c-tr-v-ch-nh-s-">Test case #4: Nháº­n vÃ o má»™t sá»‘ khÃ´ng chia háº¿t cho 3 hay 5 gÃ¬ cáº£, tráº£ vá» chÃ­nh sá»‘ Ä‘Ã³</h3>
<p>Test case cuá»‘i cÃ¹ng nÃ y thÃ¬ nháº¹ nhÃ ng thÃ´i, khÃ´ng cÃ³ trap gÃ¬ giá»‘ng nhÆ° khÃºc trÃªn ná»¯a Ä‘Ã¢u, á»© yÃªn tÃ¢m mÃ  test.</p>
<h4 id="vi-t-test-tr-c-">Viáº¿t test trÆ°á»›c...</h4>
<p>Trong trÆ°á»ng há»£p nÃ y, input cÃ³ thá»ƒ sáº½ lÃ  2, 4, 8 gÃ¬ Ä‘Ã³, miá»…n lÃ  nÃ³ khÃ´ng chia háº¿t cho tháº±ng nÃ o trong 2 sá»‘ 3 vÃ  5 lÃ  Ä‘Æ°á»£c.</p>
<p><strong>FizzBuzz_test.rb</strong></p>
<pre><code>def test_fizzbuzz_run_return_n
  expect = 8
  actual = FizzBuzz.run(8)
  assert_equal expect, actual
end
</code></pre><p>Test sáº½ fail, náº¿u khÃ´ng fail thÃ¬ cáº§n pháº£i xem láº¡i :joy: </p>
<pre><code># Running:

..F.

Finished in 0.001451s, 2756.7195 runs/s, 2756.7195 assertions/s.

  1) Failure:
FizzBuzzTest#test_fizzbuzz_run_return_n [/Users/huy/Desktop/Code/rbfizzbuzz/FizzBuzz_test.rb:26]:
Expected: 8
  Actual: nil

4 runs, 4 assertions, 1 failures, 0 errors, 0 skips
rake aborted!
</code></pre><h4 id="-vi-t-code-sau">...Viáº¿t code sau</h4>
<p>Rá»“i, giá» thÃ¬ implement cho trÆ°á»ng há»£p cuá»‘i cÃ¹ng, code nhanh cÃ²n Ä‘i cÃ  phÃª chá»›. MÃ¬nh cÃ³ cÃ¡i táº­t Ä‘ang code mÃ  ai rá»§ rÃª Ä‘i cÃ  phÃª uá»‘ng nÆ°á»›c lÃ  bá»±c láº¯m, táº¡i nghe rá»§ lÃ  Ä‘á»©ng dáº­y Ä‘i liá»n Ã ...</p>
<p><strong>FizzBuzz.rb</strong></p>
<pre><code>def run(n)
  if n % 3 == 0 &amp;&amp; n % 5 == 0
    return &quot;FizzBuzz&quot;
  elsif n % 3 == 0
    return &quot;Fizz&quot;
  elsif n % 5 == 0
    return &quot;Buzz&quot;
  else
      return n
  end
end
</code></pre><p>Test luÃ´n:</p>
<pre><code># Running:

....

Finished in 0.001397s, 2863.2785 runs/s, 2863.2785 assertions/s.

4 runs, 4 assertions, 0 failures, 0 errors, 0 skips
</code></pre><p>Toáº¹t zá»i! Pass háº¿t luÃ´n rá»“i!!!</p>
<h2 id="k-t-lu-n">Káº¿t luáº­n</h2>
<p>Äáº¿n Ä‘Ã¢y, cÃ¡c báº¡n Ä‘Ã£ implement xong má»™t module FizzBuzz hoÃ n chá»‰nh, vá»›i Ä‘áº§y Ä‘á»§ má»i test case cáº§n thiáº¿t Ä‘á»ƒ Ä‘áº£m báº£o module luÃ´n cháº¡y Ä‘Ãºng vÃ  khÃ´ng xáº£y ra bug tiá»m áº©n. Cho nÃªn trong quÃ¡ trÃ¬nh sá»­ dá»¥ng module nÃ y trong dá»± Ã¡n, náº¿u cÃ³ xáº£y ra lá»—i thÃ¬ cÃ¡c báº¡n cÃ³ thá»ƒ cháº¡y láº¡i test Ä‘á»ƒ Ä‘áº£m báº£o váº¥n Ä‘á» khÃ´ng náº±m trong nÃ y. Váº­y lÃ  tiáº¿t kiá»‡m Ä‘Æ°á»£c má»™t chÃºt thá»i gian khi debug.</p>
<p>CÃ¡c báº¡n cÃ³ thá»ƒ tham kháº£o source Ä‘áº§y Ä‘á»§ cá»§a module FizzBuzz trong bÃ i <a href="https://gist.github.com/huytd/db4624346a16c4510598e28602005f5f">táº¡i Ä‘Ã¢y</a></p>
<hr>
<p>Äá»ƒ Ã¡p dá»¥ng TDD má»™t cÃ¡ch hiá»‡u quáº£ thÃ¬ báº¡n cáº§n pháº£i náº¯m rÃµ Ä‘Æ°á»£c yÃªu cáº§u, chia Ä‘Æ°á»£c váº¥n Ä‘á» cáº§n xá»­ lÃ½ thÃ nh cÃ¡c váº¥n Ä‘á» nhá» hÆ¡n (tá»«ng test case), Ä‘iá»u nÃ y Ä‘Ã²i há»i báº¡n pháº£i tá»‘n má»™t khoáº£n thá»i gian ban Ä‘áº§u Ä‘á»ƒ suy nghÄ© vá» viá»‡c mÃ¬nh cáº§n lÃ m trÆ°á»›c khi thá»±c sá»± báº¯t tay vÃ o code. NhÆ°ng lá»£i Ã­ch mÃ  nÃ³ Ä‘em láº¡i thÃ¬ ráº¥t nhiá»u, giá»‘ng nhÆ° viá»‡c báº¡n Ä‘i vÃ o rá»«ng mÃ  khÃ´ng sá»£ bá»‹ láº¡c vÃ¬ Ä‘Ã£ cÃ³ sáºµn táº¥m báº£n Ä‘á»“ ngá»“i tá»± váº½ tá»« Ä‘Ãªm hÃ´m qua váº­y Ä‘Ã³ :laughing: </p>
<p>Váº­y thÃ¬, nÃªn lá»±a chá»n giá»¯a tá»‘c Ä‘á»™ (bay vÃ o code Ã o Ã o) hay cháº¥t lÆ°á»£ng (uá»‘ng miáº¿ng nÆ°á»›c Äƒn miáº¿ng bÃ¡nh, viáº¿t miáº¿ng test case trÆ°á»›c rá»“i má»›i code)? Bá» thá»i gian ra ngá»“i debug vÃ  cÃ£i nhau vá»›i tester hay nháº­n bug vá» cháº¡y test Ä‘á»ƒ biáº¿t Ä‘Æ°á»£c váº¥n Ä‘á» náº±m á»Ÿ Ä‘Ã¢u rá»“i fix má»™t cÃ¡ch nhanh chÃ³ng? Trá»Ÿ thÃ nh má»™t láº­p trÃ¬nh viÃªn chuyÃªn nghiá»‡p hay má»™t cÃ´ng nhÃ¢n fix bug, fix vÃ i nÄƒm rá»“i lÃªn lÃ m leader :trollface:? Hy vá»ng Ä‘áº¿n Ä‘Ã¢y cÃ¡c báº¡n Ä‘Ã£ cÃ³ cÃ¢u tráº£ lá»i cho chÃ­nh báº£n thÃ¢n mÃ¬nh.</p>
<p>Happy bug fixing ^^</p>
<div class='other-tags'><b>Tags:</b> <a class='topic-tag' href='https://huytd.github.io/tags/tdd.html'>tdd</a><a class='topic-tag' href='https://huytd.github.io/tags/ruby.html'>ruby</a><a class='topic-tag' href='https://huytd.github.io/tags/fizzbuzz.html'>fizzbuzz</a></div>
                <div class="copyright">
                Báº¡n Ä‘Æ°á»£c tÃ¹y Ã½ báº¥m like, trÃ­ch dáº«n hoáº·c copy, post láº¡i, nhÆ°ng vui lÃ²ng ghi rÃµ nguá»“n vÃ  tÃ¡c giáº£ vÃ  khÃ´ng lÃ m thay Ä‘á»•i ná»™i dung bÃ i viáº¿t. Náº¿u khÃ´ng lÃ m váº­y, mÃ¬nh hy vá»ng tá»« nay vá» sau báº¡n sáº½ luÃ´n cáº£m tháº¥y cáº¯n rá»©t lÆ°Æ¡ng tÃ¢m, Äƒn khÃ´ng ngon, ngá»§ khÃ´ng yÃªn. ğŸ˜†
                </div>
            </div>
        </div>
	    <div class="footer">
            <p>Created with <a href="http://github.com/huytd/azeroth-js">azeroth.js</a></p>
            <div class="social">
                <a target="_blank" href="http://facebook.com/kingbazoka"><i class="icon-facebook-squared"></i></a>
                <a target="_blank" href="http://twitter.com/huydotnet"><i class="icon-twitter-squared"></i></a>
                <a target="_blank" href="http://github.com/huytd"><i class="icon-github-squared"></i></a>
                <a target="_blank" href="https://thefullsnack.com"><i class="icon-emo-coffee"></i></a>
            </div>
        </div>
        <script type="text/javascript" async src="https://cdn.rawgit.com/mathjax/MathJax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
        <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
          tex2jax: {
            inlineMath: [['$','$'], ['\\(','\\)']],
            skipTags: ["script","noscript","style","textarea"]
          }
        });
        </script>
    </body>
</html>
