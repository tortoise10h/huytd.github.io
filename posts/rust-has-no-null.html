<html>
    <head>
        <title> Rust kh√¥ng c√≥ NULL th√¨ code ki·ªÉu g√¨? | Huy's Blog</title>
        <meta charset="utf-8">
        <meta http-equiv="content-type" content="text/html;"><meta name=viewport content="initial-scale=1.0 maximum-scale=1.0">
        
        <link href="../css/inconsolata.css" rel="stylesheet" type="text/css">
        <link href="../css/theme.css" rel="stylesheet" type="text/css">
        <link rel="stylesheet" href="../css/highlight/tomorrow.css">
        <link rel="stylesheet" href="../css/fontello.css">
        <script src="../js/highlight.pack.js"></script>
        <script src="../js/autosizing.js"></script>
        <script>
        hljs.initHighlightingOnLoad();
        </script>
    </head>
    <body>
        <div class="header">
            <a href="/"><i class="icon icon-emo-coffee"></i> Huy's Blog</a>
        </div>
        <div class="container">
            <div class="main">
                <h1 id="rust-kh-ng-c-null-th-code-ki-u-g-">Rust kh√¥ng c√≥ NULL th√¨ code ki·ªÉu g√¨?</h1>
<p>C√≥ l·∫Ω m·ªôt s·ªë b·∫°n s·∫Ω c√≥ th·∫Øc m·∫Øc nh∆∞ ti√™u ƒë·ªÅ khi m·ªõi t√¨m hi·ªÉu v·ªÅ Rust. H·∫≥n l√† c√°c b·∫°n ƒë√£ bi·∫øt, ho·∫∑c nghe ƒë√¢u ƒë√≥ l√†: <strong>Trong Rust kh√¥ng c√≥ NULL</strong>. B√†i vi·∫øt n√†y s·∫Ω gi√∫p cho c√°c b·∫°n hi·ªÉu r√µ h∆°n v·ªÅ v·∫•n ƒë·ªÅ n√†y. </p>
<h2 id="null-trong-c-c-ng-n-ng-l-p-tr-nh">NULL trong c√°c ng√¥n ng·ªØ l·∫≠p tr√¨nh</h2>
<p>ƒê√£ l√† l·∫≠p tr√¨nh vi√™n, ch·∫Øc h·∫≥n ai c≈©ng qu√° quen thu·ªôc v·ªõi <code>NULL</code>, hay <code>nil</code>.</p>
<p>Th·∫≠m ch√≠ trong phi√™n b·∫£n Pokemon Sun &amp; Pokemon Moon m·ªõi nh·∫•t (·ªü th·ªùi ƒëi·ªÉm vi·∫øt b√†i n√†y), c≈©ng xu·∫•t hi·ªán m·ªôt Pokemon m·ªõi t√™n l√† <strong>Type: Null</strong> (<a href="http://bulbapedia.bulbagarden.net/wiki/Type:_Null_(Pok%C3%A9mon)">„Çø„Ç§„ÉóÔºö„Éå„É´</a>).</p>
<p><img src="img/typenull.jpg" alt=""></p>
<p>=)) l·∫°c ƒë·ªÅ, quay l·∫°i ch·ªß ƒë·ªÅ ch√≠nh.</p>
<p><code>NULL</code> l√† m·ªôt gi√° tr·ªã di·ªÖn t·∫£ tr·∫°ng th√°i kh√¥ng c√≥ g√¨ c·∫£, m·ªôt gi√° tr·ªã ch∆∞a bi·∫øt. Trong tr∆∞·ªùng h·ª£p l√† m·ªôt con tr·ªè th√¨ <code>NULL</code> cho bi·∫øt con tr·ªè n√†y kh√¥ng tr·ªè t·ªõi ƒë√¢u c·∫£.</p>
<p>Vi·ªác s·ª≠ d·ª•ng <code>NULL</code> l√† r·∫•t ph·ªï bi·∫øn, v√≠ d·ª• m·ªôt trong nh·ªØng best practices khi l·∫≠p tr√¨nh C ƒë√≥ l√† ki·ªÉm tra gi√° tr·ªã <code>NULL</code> khi s·ª≠ d·ª•ng h√†m <code>malloc</code> ƒë·ªÉ c·∫•p ph√°t b·ªô nh·ªõ:</p>
<pre><code>#include &lt;stdlib.h&gt;

char* str = malloc(_MATH_PATH);
if (str == NULL) {
  printf(&quot; L·ªói r·ªìi c√°c b√°c ·∫°! Bu·ªìn qu√°! Kh√¥ng ƒë·ªß b·ªô nh·ªõ! :( &quot;);
} else {
  // ƒê√£ c·∫•p ph√°t b·ªô nh·ªõ th√†nh c√¥ng cho bi·∫øn str
}
</code></pre><p>Hay nh∆∞ c√°ch ki·ªÉm tra l·ªói v√¥ c√πng &quot;ƒë·∫πp m·∫Øt&quot; c·ªßa Golang:</p>
<pre><code>f, err := os.Open(&quot;how-to-be-a-richman.txt&quot;)
if err != nil {
  // T·∫°ch ch·ªó n√†y n√® 
  log.Fatal(err)
}
// T·ªõi ƒë∆∞·ª£c ƒë√¢y th√¨ kh√¥ng t·∫°ch nh√°
</code></pre><p>Tuy nhi√™n, d√π ƒë∆∞·ª£c d√πng r·∫•t ph·ªï bi·∫øn, vi·ªác t·∫°o ra gi√° tri <code>NULL</code> v·∫´n b·ªã ch√≠nh cha ƒë·∫ª c·ªßa n√≥ coi l√† m·ªôt sai l·∫ßm &quot;tr·ªã gi√° t·ªâ ƒë√¥&quot;<sup><a href="#-c-th-m">[1]</a></sup>.</p>
<p>Trong su·ªët l·ªãch s·ª≠ ph√°t tri·ªÉn c·ªßa n·ªÅn khoa h·ªçc m√°y t√≠nh, ƒë√£ c√≥ v√¥ s·ªë ch∆∞∆°ng tr√¨nh m√°y t√≠nh t·ªèi kh√¥ng l√Ω do, b·ªüi c√πng m·ªôt hung th·ªß ƒë√≥ l√† <code>Null Pointer Exception</code>. =))</p>
<p><img src="img/nullpointermeme.jpeg" alt=""></p>
<p>Ho·∫∑c c√≥ th·ªÉ k·ªÉ ƒë·∫øn m·ªëi quan h·ªá nh·∫≠p nh·∫±ng m√π m·ªù gi·ªØa <code>null</code> v√† <code>undefined</code> ƒë√£ khi·∫øn bao nhi√™u th·∫ø h·ªá l·∫≠p tr√¨nh vi√™n JavaScript ph·∫£i v√≤ ƒë·∫ßu b·ª©t tai:</p>
<pre><code>typeof null           // &quot;object&quot;
typeof undefined      // &quot;undefined&quot;
null === undefined    // false
null  == undefined    // true
null === null         // true
null == null          // true
!null                 // true
isNaN(1 + null)       // false
isNaN(1 + undefined)  // true
</code></pre><p>Ho·∫∑c ƒë·ªëi v·ªõi SQL, ch√∫ng ta kh√¥ng th·ªÉ so s√°nh gi√° tr·ªã <code>NULL</code> v·ªõi c√°c field trong m·ªôt b·∫£ng m·ªôt c√°ch tr·ª±c ti·∫øp b·∫±ng c√°c to√°n t·ª≠ <code>=</code> hay <code>&lt;&gt;</code> ƒë∆∞·ª£c, m√† ph·∫£i d√πng c√°c to√°n t·ª≠ ƒë·∫∑c bi·ªát, l√† <code>IS</code> v√† <code>IS NOT</code> ƒë·ªÉ l√†m vi·ªác v·ªõi ch√∫ng.<sup><a href="#-c-th-m">[2]</a></sup></p>
<h2 id="t-i-sao-l-i-ph-i-check-null-">T·∫°i sao l·∫°i ph·∫£i check NULL?</h2>
<p>Trong h·∫ßu h·∫øt m·ªçi tr∆∞·ªùng h·ª£p, ch√∫ng ta th·ª±c hi·ªán thao t√°c ki·ªÉm tra m·ªôt bi·∫øn c√≥ ph·∫£i l√† <code>NULL</code> kh√¥ng, l√† v√¨ ch√∫ng ta c·∫ßn d√πng t·ªõi gi√° tr·ªã c·ªßa bi·∫øn ƒë√≥, nh∆∞ng l·∫°i s·ª£ r·∫±ng n√≥ kh√¥ng mang gi√° tr·ªã. V√† v√¨ s·ª£ n√™n c·ª© ph·∫£i check.</p>
<p><img src="img/nullpointer.jpeg" alt=""></p>
<p>Gi·ªëng nh∆∞ c·ª© b∆∞·ªõc ra kh·ªèi nh√† l√† cho tay v√†o s·ªù c√°i qu·∫ßn, √†, c√°i t√∫i qu·∫ßn, ƒë·ªÉ ki·ªÉm tra xem m√¨nh c√≥ ƒëem theo ƒëi·ªán tho·∫°i kh√¥ng. Ri·∫øt r·ªìi th√†nh quen, ƒë∆∞a tay s·ªù qu·∫ßn nh∆∞ m·ªôt ph·∫£n x·∫° t·ª± nhi√™n.</p>
<p>V·∫≠y l√†m sao ƒë·ªÉ kh·ªèi ph·∫£i ƒë∆∞a tay s·ªù qu·∫ßn li√™n t·ª•c n·ªØa? Ph·∫£i c√≥ m·ªôt c√°ch g√¨ ƒë√≥ ƒë·ªÉ ch·∫Øc ch·∫Øn r·∫±ng c√°i ƒëi·ªán tho·∫°i lu√¥n lu√¥n n·∫±m trong t√∫i, ƒë√∫ng kh√¥ng?</p>
<p>T∆∞∆°ng t·ª± nh∆∞ th·∫ø ƒë·ªëi v·ªõi l·∫≠p tr√¨nh, ƒë·ªÉ tho√°t kh·ªèi vi·ªác check <code>NULL</code> li√™n t·ª•c th√¨ ta ph·∫£i c√≥ c√°ch g√¨ ƒë√≥ ƒë·ªÉ ƒë·∫£m b·∫£o r·∫±ng m·ªôt gi√° tr·ªã kh√¥ng bao gi·ªù b·ªã <code>NULL</code>.</p>
<p>ƒê·ªÉ l√†m ƒë∆∞·ª£c ƒëi·ªÅu n√†y, Rust kh√¥ng cho b·∫°n g√°n b·∫•t k√¨ gi√° tr·ªã n√†o l√† <code>NULL</code> c·∫£ (d·ªØ d·ªôi ch∆∞a, qu·∫£n kh√¥ng ƒë∆∞·ª£c th√¨ c·∫•m lu√¥n cho kh·ªèe :))) v√† Rust kh√¥ng ph·∫£i l√† ng√¥n ng·ªØ ƒë·∫ßu ti√™n ho·∫∑c duy nh·∫•t √°p d·ª•ng ph∆∞∆°ng ph√°p n√†y, m·ªôt s·ªë ng√¥n ng·ªØ l·∫≠p tr√¨nh h√†m nh∆∞ Haskell c≈©ng c·∫•m kh√¥ng cho m·ªôt bi·∫øn mang gi√° tr·ªã <code>NULL</code>. <sup><a href="https://kipalog.com/posts/Co-Khong---Functional-idioms-de-dung-nullable-values-voi-functions-nhu-normal-values--Phan-1">[3]</a></sup></p>
<p>(N√≥i nh∆∞ v·∫≠y kh√¥ng c√≥ nghƒ©a Rust l√† m·ªôt ng√¥n ng·ªØ l·∫≠p tr√¨nh h√†m nh√©)</p>
<h2 id="kh-ng-cho-x-i-null-th-gi-x-i-g-">Kh√¥ng cho x√†i NULL th√¨ gi·ªù x√†i g√¨?</h2>
<p>V√† c≈©ng gi·ªëng nh∆∞ Haskell, Rust cung c·∫•p m·ªôt ki·ªÉu g·ªçi l√† <code>Option&lt;T&gt;</code> (trong Haskell l√† <code>Maybe</code> v√† trong Swift l√† <code>Optional</code>, gi·ªù th√¨ trong Java c≈©ng c√≥ n·ªët), cho ch√∫ng ta m·ªôt ph∆∞∆°ng ph√°p kh√°c ƒë·ªÉ gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ m√† kh√¥ng c·∫ßn d√πng t·ªõi <code>NULL</code>. </p>
<p>·ªû <a href="https://huytd.github.io/posts/rust-binary-tree-traversal.html">b√†i tr∆∞·ªõc</a> m√¨nh c≈©ng ƒë√£ gi·ªõi thi·ªáu c√°ch s·ª≠ d·ª•ng <code>Option&lt;T&gt;</code>.</p>
<p>B√¢y gi·ªù l√† l√∫c n√≥i r√µ h∆°n v·ªÅ v·∫•n ƒë·ªÅ n√†y.</p>
<h3 id="b-n-ch-t-c-a-ki-u-option">B·∫£n ch·∫•t c·ªßa ki·ªÉu Option</h3>
<p>B·∫±ng vi·ªác b·ªè <code>NULl</code>, t·ª´ b√¢y gi·ªù m·ªói khi s·ª≠ d·ª•ng m·ªôt bi·∫øn, b·∫°n c√≥ th·ªÉ y√™n t√¢m r·∫±ng bi·∫øn ƒë√≥ lu√¥n c√≥ gi√° tr·ªã, kh√¥ng b·ªã <code>NULL</code> n·ªØa.</p>
<p>Khi g·∫∑p m·ªôt v·∫•n ƒë·ªÅ m√† ta ch∆∞a bi·∫øt ch·∫Øc ch·∫Øn k·∫øt qu·∫£ tr·∫£ v·ªÅ c·ªßa v·∫•n ƒë·ªÅ ƒë√≥ nh∆∞ th·∫ø n√†o, n√≥ c√≥ th·ªÉ ch·ª©a gi√° tr·ªã ho·∫∑c kh√¥ng, v√≠ d·ª• nh∆∞ trong linked list, ho·∫∑c khi implement m·ªôt h√†m chia hai s·ªë <code>a</code> v√† <code>b</code>, th√¨ ta c√≥ th·ªÉ d√πng ki·ªÉu <code>Option&lt;T&gt;</code>.</p>
<p>M·ªôt bi·∫øn ki·ªÉu <code>Option&lt;T&gt;</code> s·∫Ω lu√¥n lu√¥n t·ªìn t·∫°i m·ªôt trong hai gi√° tr·ªã <code>None</code> (kh√¥ng c√≥ gi√° tr·ªã n√†o c·∫£) ho·∫∑c <code>Some(T)</code> (tr·∫£ v·ªÅ gi√° tr·ªã ki·ªÉu <code>T</code> c·ªßa bi·∫øn ƒë√≥). V√≠ d·ª•:</p>
<pre><code>fn divide(a: f64, b: f64) -&gt; Option&lt;f64&gt; {
  if b == 0.0 {
    None
  } else {
    Some(a / b)
  }
}
</code></pre><p>Trong ƒëo·∫°n code tr√™n, ch√∫ng ta ki·ªÉm tra n·∫øu m·∫´u s·ªë <code>b</code> b·∫±ng <code>0</code> th√¨ ph√©p chia kh√¥ng th·ª±c hi·ªán ƒë∆∞·ª£c, v√† h√†m <code>divide(a,b)</code> tr·∫£ v·ªÅ gi√° tr·ªã <code>None</code>, ng∆∞·ª£c l·∫°i th√¨ tr·∫£ v·ªÅ gi√° tr·ªã <code>Some(a / b)</code>.</p>
<p>V·∫≠y ch√∫ng ta s·∫Ω l√†m g√¨ v·ªõi m·ªôt trong 2 gi√° tr·ªã tr·∫£ v·ªÅ n√†y? Ch√∫ng ta s·∫Ω l·∫•y n√≥ ra nh∆∞ th·∫ø n√†o?</p>
<h3 id="d-ng-match-handle-c-c-gi-tr-tr-v-">D√πng match ƒë·ªÉ handle c√°c gi√° tr·ªã tr·∫£ v·ªÅ</h3>
<p>Khi nh·∫≠n ƒë∆∞·ª£c m·ªôt gi√° tr·ªã ki·ªÉu <code>Option&lt;T&gt;</code>, ch√∫ng ta c√≥ th·ªÉ ƒë·ªçc gi√° tr·ªã t·ª´ bi·∫øn n√†y ra b·∫±ng c√°ch d√πng <code>match</code>:</p>
<pre><code>match result {
  Some(c) =&gt; println!(&quot;K·∫øt qu·∫£ l√†: {}&quot;, c),
  None    =&gt; println!(&quot;Kh√¥ng chia ƒë∆∞·ª£c cho 0 ƒë√¢u nh√°!&quot;)
}
</code></pre><p>T·∫•t nhi√™n ƒë·∫øn ƒë√¢y th√¨ ch∆∞a c√≥ g√¨ ƒë√°ng n√≥i, nghe c√≥ v·∫ª gi·ªëng v·ªõi c√¢u l·ªánh <code>switch()</code> ·ªü c√°c ng√¥n ng·ªØ kh√°c.</p>
<p>ƒêi·ªÅu ƒë√°ng n√≥i ·ªü ƒë√¢y l√† <code>match</code> b·∫Øt bu·ªôc b·∫°n <strong>ph·∫£i ki·ªÉm tra h·∫øt t·∫•t c·∫£ m·ªçi tr∆∞·ªùng h·ª£p c√≥ th·ªÉ x·∫£y ra</strong> (exhaustiveness checking), v√≠ d·ª• nh∆∞ ·ªü ƒëo·∫°n code tr√™n m√† b·∫°n kh√¥ng handle tr∆∞·ªùng h·ª£p <code>None</code> th√¨ s·∫Ω nh·∫≠n th√¥ng b√°o l·ªói:</p>
<pre><code>error: non-exhaustive patterns: `None` not covered
</code></pre><p>V√¨ ch√∫ng ta s·ª≠ d·ª•ng ki·ªÉu <code>Option&lt;T&gt;</code> cho m·ªôt bi·∫øn khi ch√∫ng ta kh√¥ng ch·∫Øc ch·∫Øn gi√° tr·ªã c·ªßa n√≥ l√† g√¨, n√™n b·∫Øt bu·ªôc ch√∫ng ta ph·∫£i ki·ªÉm tra ƒë·∫ßy ƒë·ªß m·ªçi kh·∫£ nƒÉng c√≥ th·ªÉ c√≥ c·ªßa n√≥. </p>
<h3 id="d-ng-if-let-l-y-gi-tr-tr-v-">D√πng if let ƒë·ªÉ l·∫•y gi√° tr·ªã tr·∫£ v·ªÅ</h3>
<p>M·ªôt c√°ch kh√°c ƒë√≥ l√† d√πng <code>if let</code> ƒë·ªÉ l·∫•y ra ƒë√∫ng gi√° tr·ªã c·∫ßn d√πng, c·∫£ c√°ch n√†y l·∫´n c√°ch tr√™n ƒë·ªÅu l√† c√°c ·ª©ng d·ª•ng c·ªßa pattern matching trong Rust.</p>
<pre><code>if let Some(ref c) = result {
  println!(&quot;K·∫øt qu·∫£ l√†: {}&quot;, c);
} else {
  println!(&quot;Chia h·ªïng c√≥ ƒë∆∞·ª£c :(&quot;);
}
</code></pre><h3 id="d-ng-unwrap-l-y-gi-tr-tr-v-">D√πng unwrap ƒë·ªÉ l·∫•y gi√° tr·ªã tr·∫£ v·ªÅ</h3>
<p>N·∫øu kh√¥ng mu·ªën d√πng pattern matching, ch√∫ng ta c√≥ th·ªÉ s·ª≠ d·ª•ng m·ªôt c√°ch kh√°c ƒë√≥ l√† <code>unwrap</code>.</p>
<p>Unwrap t·ª©c l√† m·ªü g√≥i, gi√° s·ª≠ h√†m <code>divide(a,b)</code> tr·∫£ v·ªÅ cho b·∫°n m·ªôt g√≥i qu√†, b·∫°n ch∆∞a bi·∫øt b√™n trong c√≥ g√¨, b·∫°n ph·∫£i <code>unwrap()</code> n√≥ ƒë·ªÉ l·∫•y gi√° tr·ªã ·ªü b√™n trong.</p>
<p>C√≥ nhi·ªÅu c√°ch ƒë·ªÉ unwrap m·ªôt gi√° tr·ªã, m·ªói c√°ch ƒë·ªÅu s·∫Ω c√≥ nh·ªØng c√°ch ho·∫°t ƒë·ªông kh√°c nhau, v√≠ d·ª•:</p>
<ul>
<li><code>unwrap()</code>: M·ªü g√≥i v√† xem gi√° tr·ªã b√™n trong, n·∫øu gi√° tr·ªã b√™n trong l√† <code>None</code> th√¨ ch∆∞∆°ng tr√¨nh s·∫Ω b·ªã <strong>panic</strong> (ki·ªÉu nh∆∞ h√°o h·ª©c m·ªü qu√† ra m√† ko th·∫•y c√≥ g√¨ b√™n trong, shock qu√° t·ªèi lu√¥n)</li>
<li><code>unwrap_or()</code>: L·∫ßn n√†y th√¨ b√¨nh tƒ©nh h∆°n, m·ªü qu√† l·∫•y gi√° tr·ªã, n·∫øu kh√¥ng c√≥ g√¨ (<code>None</code>) th√¨ s·∫Ω l·∫•y gi√° tr·ªã truy·ªÅn v√†o ch·ª© kh√¥ng b·ªã panic.</li>
<li><code>unwrap_or_else()</code>: M·ªü g√≥i qu√† ra l·∫•y gi√° tr·ªã b√™n trong, n·∫øu b√™n trong l√† <code>None</code> th√¨ th·ª±c thi kh·ªëi l·ªánh ƒë∆∞·ª£c truy·ªÅn v√†o ƒë·ªÉ l·∫•y gi√° tr·ªã ra.</li>
<li><code>unwrap_or_default()</code>: M·ªü qu√† l·∫•y gi√° tr·ªã, n·∫øu l√† <code>None</code> th√¨ l·∫•y gi√° tr·ªã m·∫∑c ƒë·ªãnh c·ªßa ki·ªÉu d·ªØ li·ªáu ƒë√≥.</li>
</ul>
<pre><code>let result = divide(10.0, 0.0);

let c = result.unwrap_or_default();
println!(&quot;{}&quot;, c); // Tr·∫£ v·ªÅ 0.0

let d = result.unwrap_or(-999.0);
println!(&quot;{}&quot;, d); // Tr·∫£ v·ªÅ -999.0

let e = result.unwrap(); // Panic :(
</code></pre><h2 id="k-t-lu-n">K·∫øt lu·∫≠n</h2>
<p>T√≥m l·∫°i, b·∫±ng c√°ch t·ª´ b·ªè vi·ªác s·ª≠ d·ª•ng <code>NULL</code>, Rust cung c·∫•p cho ch√∫ng ta r·∫•t nhi·ªÅu c√°ch kh√°c ƒë·ªÉ khi·∫øn ta kh√≥ vi·∫øt code x·∫•u (bad code, unsafe, ·∫©u) h∆°n, an to√†n h∆°n v√† ƒë·∫£m b·∫£o r·∫±ng kh√¥ng bao gi·ªù ch√∫ng ta ƒë·ªÉ l·ªçt m·ªôt tr∆∞·ªùng h·ª£p nguy hi·ªÉm n√†o ra ngo√†i. T·ª´ ƒë√≥ s·∫Ω gi·∫£m thi·ªÉu ƒë∆∞·ª£c t·ªëi ƒëa nguy c∆° x·∫£y ra l·ªói khi ch·∫°y ch∆∞∆°ng tr√¨nh.</p>
<p>V√† lu√¥n lu√¥n, s·∫Ω c√≥ m·ªôt anh b·∫°n Rust compiler ƒë·∫πp zai v√† kh√≥ t√≠nh lu√¥n ch·ª±c ch·ªù b·∫≠t ra ƒë·ªÉ b·∫Øt n·∫°t ch√∫ng ta m·ªói khi ch√∫ng ta ƒë·ªÉ l·ªçt c√°c tr∆∞·ªùng h·ª£p nguy hi·ªÉm.</p>
<p>C√≥ th·ªÉ b·∫°n s·∫Ω th·∫•y c√°c c√°ch m√† Rust ƒë∆∞a ra ƒë·ªÉ ch√∫ng ta c√≥ th·ªÉ t·ª´ b·ªè vi·ªác s·ª≠ d·ª•ng <code>NULL</code> n√≥ ch·∫≥ng c√≥ g√¨ m·ªõi m·∫ª, hay th·∫≠m ch√≠ l√† ch√∫ng ta c√≥ th·ªÉ d·ªÖ d√†ng s·ª≠ d·ª•ng nh·ªØng c√°ch n√†y (ho·∫∑c t∆∞∆°ng t·ª± nh∆∞ nh·ªØng c√°ch n√†y) trong c√°c ng√¥n ng·ªØ kh√°c nh∆∞ C/C++ hay Java, JavaScript. ƒêi·ªÅu n√†y ƒë√∫ng. V·∫•n ƒë·ªÅ l√† n·∫øu kh√¥ng b·∫Øt bu·ªôc th√¨ b·∫°n s·∫Ω ch·∫≥ng bao gi·ªù d√πng t·ªõi nh·ªØng c√°ch n√†y, m·ªçi l·∫≠p tr√¨nh vi√™n ƒë·ªÅu nh∆∞ v·∫≠y (tr·ª´ m·ªôt v√†i ng∆∞·ªùi kƒ© t√≠nh), nh·ªØng g√¨ Rust l√†m ch·ªâ ƒë∆°n gi·∫£n l√† b·∫Øt b·∫ª v√† kh·∫Øt khe h∆°n ƒë·ªÉ ch√∫ng ta bu·ªôc ph·∫£i s·ª≠ d·ª•ng nh·ªØng c√°ch ƒë√≥ v√†o m√† th√¥i.</p>
<h2 id="-c-th-m">ƒê·ªçc th√™m</h2>
<ul>
<li>[1]: Tony Hoare, <a href="https://www.infoq.com/presentations/Null-References-The-Billion-Dollar-Mistake-Tony-Hoare">Null References: The Billion Dollar Mistake</a>, Infoq</li>
<li>[2]: Huy ƒê·ªó, <a href="https://kipalog.com/posts/SQL-and-NULL">SQL and NULL</a>, Kipalog</li>
<li>[3]: Justin Le, <a href="https://kipalog.com/posts/Co-Khong---Functional-idioms-de-dung-nullable-values-voi-functions-nhu-normal-values--Phan-1">&quot;C√≥ Kh√¥ng?&quot; Functional idioms ƒë·ªÉ d√πng nullable values v·ªõi functions nh∆∞ normal values</a>, Kipalog</li>
<li>[4]: Neil Brown, <a href="https://lwn.net/Articles/547145/">A taste of Rust</a>, LWN.net</li>
</ul>
<div class='other-tags'><b>Tags:</b> <a class='topic-tag' href='https://huytd.github.io/tags/rust.html'>rust</a></div>
                <div class="copyright">
                B·∫°n ƒë∆∞·ª£c t√πy √Ω b·∫•m like, tr√≠ch d·∫´n ho·∫∑c copy, post l·∫°i, nh∆∞ng vui l√≤ng ghi r√µ ngu·ªìn v√† t√°c gi·∫£ v√† kh√¥ng l√†m thay ƒë·ªïi n·ªôi dung b√†i vi·∫øt. N·∫øu kh√¥ng l√†m v·∫≠y, m√¨nh hy v·ªçng t·ª´ nay v·ªÅ sau b·∫°n s·∫Ω lu√¥n c·∫£m th·∫•y c·∫Øn r·ª©t l∆∞∆°ng t√¢m, ƒÉn kh√¥ng ngon, ng·ªß kh√¥ng y√™n. üòÜ
                </div>
                <!-- Comment -->
                <div class="comments">
                  <div id="comment-loading" class="loading"></div>
                  <div id="login-box" class="login">
                    B·∫°n c·∫ßn <button onclick="login()">Login</button> ƒë·ªÉ comment
                  </div>
                  <div id="comment-box" class="comment-input">
                    <div class="avatar">
                      <img id="user-avatar" src="" width="32" height="32"/>
                    </div>
                    <div class="input">
                      <textarea id="comment-content" onkeyup="autoSizing(this)" onkeydown="submitComment(event)" placeholder="Comment g√µ v√†o ƒë√¢y :D"></textarea>
                      <span>G√µ xong nh·∫•n <kbd>Ctrl</kbd> + <kbd>Enter</kbd> ƒë·ªÉ g·ª≠i.</span>
                    </div>
                  </div>
                  <ul id="comment-list" class="comment-list"></ul>
                </div>
                <!-- End Comment -->
            </div>
        </div>
	    <div class="footer">
            <p>Created with <a href="http://github.com/huytd/azeroth-js">azeroth.js</a></p>
            <div class="social">
                <a target="_blank" href="http://facebook.com/kingbazoka"><i class="icon-facebook-squared"></i></a>
                <a target="_blank" href="http://twitter.com/huydotnet"><i class="icon-twitter-squared"></i></a>
                <a target="_blank" href="http://github.com/huytd"><i class="icon-github-squared"></i></a>
                <a target="_blank" href="https://thefullsnack.com"><i class="icon-emo-coffee"></i></a>
            </div>
        </div>
        <script type="text/javascript" async src="https://cdn.rawgit.com/mathjax/MathJax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
        <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
          tex2jax: {
            inlineMath: [['$','$'], ['\\(','\\)']],
            skipTags: ["script","noscript","style","textarea"]
          }
        });
        </script>
        <script src="https://www.gstatic.com/firebasejs/3.8.0/firebase.js"></script>
        <script>
          // Initialize Firebase
          var config = {
            apiKey: "AIzaSyA1PnIAlJJ-U6iQJMNnCOknBuziBqGMYcY",
            authDomain: "huys-blog-comment.firebaseapp.com",
            databaseURL: "https://huys-blog-comment.firebaseio.com",
            projectId: "huys-blog-comment",
            storageBucket: "huys-blog-comment.appspot.com",
            messagingSenderId: "317330376829"
          };
          firebase.initializeApp(config);
        </script>
        <script>
          let provider = new firebase.auth.GoogleAuthProvider();
          let auth = firebase.auth();
          let currentUser = null;
          let postCommentURL = 'posts/rust-has-no-null/comments';

          auth.onAuthStateChanged(function(user) {
            document.getElementById("comment-loading").style.display = "none";
            if (user) {
              currentUser = user;
              // Logged in
              document.getElementById("login-box").style.display = "none";
              document.getElementById("comment-box").style.display = "flex";
              document.getElementById("user-avatar").setAttribute("src", user.photoURL);
            } else {
              // Not login yet
              document.getElementById("comment-box").style.display = "none";
              document.getElementById("login-box").style.display = "block";
            }
          });

          const login = function() {
            auth.signInWithPopup(provider)
              .then(function(result) {
              }).catch(function(err) {
              });
          };

          const encodeHTML = function(s) {
            return s.replace(/</g, '&lt;').replace(/"/g, '&quot;').replace(/>/g, '&gt;');
          };

          const saveNewComment = function(comment) {
            if (!currentUser) {
              return;
            }
            let commentData = {
              user: currentUser.displayName,
              avatar: currentUser.photoURL,
              time: (new Date()).toISOString(),
              message: encodeHTML(comment)
            };
            database.ref(postCommentURL).push(commentData);
            document.getElementById("comment-content").value = "";
          };

          const submitComment = function(e) {
            let keyCode = e.which || e.keyCode;
            let ctrlCode = e.ctrlKey || e.metaKey;
            if (keyCode === 13 && ctrlCode) {
              let comment = document.getElementById("comment-content").value;
              saveNewComment(comment);
            }
          };

          const filterURLinComment = function(comment) {
            return comment.replace(/(https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|www\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9]\.[^\s]{2,}|www\.[a-zA-Z0-9]\.[^\s]{2,})/g, "<a target='_blank' rel='noopener noreferrer' href='$1'>$1</a>");
          };

          const addNewComment = function(user, avatar, time, comment) {
            let commentFiltered = encodeHTML(comment);
            commentFiltered = filterURLinComment(commentFiltered);
            let d = new Date(time);
            let commentTime = d.toLocaleTimeString() + ' ' + d.toLocaleDateString();
            let html = '<div class="avatar">' +
              '   <img src="' + avatar + '" width="32" height="32"/>' +
              ' </div>' +
              '<div class="comment">' +
              '  <div class="metadata"><b>' + user + '</b> l√∫c <span>' + commentTime + '</span></div>' +
              '  <div class="content">' + commentFiltered
              '  </div>' +
              '</div>';
            let li = document.createElement('li');
            li.innerHTML = html;
            document.getElementById("comment-list").append(li);
          };

          let database = firebase.database();
          let posts = database.ref(postCommentURL).orderByChild('time');
          posts.on('child_added', function(data) {
            addNewComment(data.val().user, data.val().avatar, data.val().time, data.val().message);
          });
        </script>
    </body>
</html>
