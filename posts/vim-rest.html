<html>
    <head>
        <title> Dùng Vim làm REST API client | Huy's Blog</title>
        <meta charset="utf-8">
        <meta http-equiv="content-type" content="text/html;"><meta name=viewport content="initial-scale=1.0 maximum-scale=1.0">
        
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inconsolata:400,700">
        <link href='https://fonts.googleapis.com/css?family=Noto+Serif:400,400italic,700,700italic&subset=latin,vietnamese' rel='stylesheet' type='text/css'>
        <link href="../css/theme.css" rel="stylesheet" type="text/css">
        <link rel="stylesheet" href="../css/highlight/tomorrow.css">
        <link rel="stylesheet" href="../css/fontello.css">
        <script src="../js/highlight.pack.js"></script>
        <script>
        hljs.initHighlightingOnLoad();
        </script>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    </head>
    <body>
        <div class="header">
            <a href="/"><i class="icon icon-emo-coffee"></i> Huy's Blog</a>
        </div>
        <div class="container">
            <div class="main">
                <h1 id="d-ng-vim-l-m-rest-api-client">Dùng Vim làm REST API client</h1>
<p>Thường thì khi cần test API, chúng ta sẽ dùng các HTTP client như là Postman, tuy nhiên cái này có một nhược điểm đó là nó... xài GUI. </p>
<p>Và một Vim user chân chính sẽ rất là không thoải mái nếu cứ phải nhảy qua nhảy lại giữa màn hình terminal và một ứng dụng GUI củ chuối nào đó.</p>
<p>Một giải pháp để bạn vẫn được yên phận với màn hình terminal đen ngòm đó là dùng <code>curl</code>.</p>
<p>Tuy nhiên đời chỉ đẹp nếu ta xài <code>curl</code> với những request đơn giản, vài ba params nho nhỏ. Trong trường hợp một request có hàng chục parameters, hoặc truyền vào vài ba cái header mỗi cái dài hơn trăm kí tự thì chắc không ai đủ kiên nhẫn để xài <code>curl</code> nữa.</p>
<p>Trước thực trạng nhức nhối này thì mình tính viết một plugin cho Vim để xài, ý tưởng là viết sẵn cấu trúc của một request vào buffer của Vim, rồi bấm nút 1 phát cho nó tự gọi <code>curl</code> thay mình.</p>
<p>Rất may cho sếp của mình, vì mình đã tìm được một plugin người ta viết sẵn trên mạng, nên mình ko cần ngồi làm việc riêng trong giờ làm việc nữa.</p>
<p>Mà còn điều này nữa, thực ra nãy giờ bạn không cần phải đọc những gì mình viết trên kia đâu, vì đây mới bắt đầu phần chính nè :v </p>
<h2 id="plugin-vim-rest-console">Plugin: Vim Rest Console</h2>
<p><a href="https://github.com/diepm/vim-rest-console">vim-rest-console</a> là một plugin giúp gửi/nhận request tới RESTAPI server, rất tiện dụng để test ngay trong Vim.</p>
<p>Plugin này có thể xài thoải mái với Vim và Neovim, miễn là máy tính cần có <code>curl</code>.</p>
<h3 id="c-i-t">Cài đặt</h3>
<p>Cài với các plugin manager như VimPlug hay Vundle:</p>
<pre><code>Plug &#39;diepm/vim-rest-console&#39;
</code></pre><p>Hoặc nếu bạn xài pathogen thì cài theo cách sau:</p>
<pre><code>cd ~/.vim/bundle
git clone https://github.com/diepm/vim-rest-console.git
</code></pre><h3 id="s-d-ng">Sử dụng</h3>
<p>Bạn có thể mở vim ra và gõ ngay hoặc tạo một file có đuôi <code>.rest</code> để dùng hoặc tiện lưu lại về sau.</p>
<p>Nếu mở buffer trực tiếp thì có thể dùng lệnh sau để có syntax highlighting:</p>
<pre><code>:set ft=rest
</code></pre><p>Sau đó gõ cấu trúc request theo dạng:</p>
<pre><code>http(s)://&lt;host&gt;:&lt;port&gt;
&lt;danh sách header nếu có&gt;
&lt;METHOD&gt; &lt;endpoint&gt;
&lt;request body&gt;
</code></pre><p>Ví dụ:</p>
<pre><code>https://facebook.com/api/v1
Content-Type: application/json
Pragma: no-cache
POST /delete_user/
{
  &quot;username&quot;: &quot;markzuck&quot;
}
</code></pre><p>Nếu bạn muốn gửi một <code>POST</code> request đến <code>https://facebook.com/api/v1/delete_user</code> với request body là <code>username: markzuck</code>.</p>
<p>Sau khi gõ xong nội dung request, nhấm <code>Ctrl + J</code> để bắt đầu gửi request đi. </p>
<p>Vim sẽ tạo ra một split mới để hiện kết quả request. Rất là tiện lợi.</p>

                <div class="fb-like" data-href="http://huytd.github.io/posts/vim-rest.html" data-layout="standard" data-action="like" data-show-faces="true" data-share="true"></div>
                <div id="disqus_thread"></div>
                <script>
                /**
                * RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
                * LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
                */
                /*
                var disqus_config = function () {
                this.page.url = PAGE_URL; // Replace PAGE_URL with your page's canonical URL variable
                this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
                };
                */
                (function() { // DON'T EDIT BELOW THIS LINE
                var d = document, s = d.createElement('script');

                s.src = '//huysblog.disqus.com/embed.js';

                s.setAttribute('data-timestamp', +new Date());
                (d.head || d.body).appendChild(s);
                })();
                </script>
                <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
            </div>
        </div>
	    <div class="footer">
            <p>Created with <a href="http://github.com/huytd/azeroth-js">azeroth.js</a></p>
            <div class="social">
                <a target="_blank" href="http://facebook.com/kingbazoka"><i class="icon-facebook-squared"></i></a>
                <a target="_blank" href="http://twitter.com/huydotnet"><i class="icon-twitter-squared"></i></a>
                <a target="_blank" href="http://github.com/huytd"><i class="icon-github-squared"></i></a>
                <a target="_blank" href="https://thefullsnack.com"><i class="icon-emo-coffee"></i></a>
            </div>
        </div>
        <script>
          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

          ga('create', 'UA-71353335-1', 'auto');
          ga('send', 'pageview');
        </script>
        <script>
          window.fbAsyncInit = function() {
            FB.init({
              appId      : '462066520669072',
              xfbml      : true,
              version    : 'v2.6'
            });

            FB.Event.subscribe('edge.create', function(url) {
              ga('send', 'social', 'facebook', 'like', url);
            });
          };

          (function(d, s, id){
             var js, fjs = d.getElementsByTagName(s)[0];
             if (d.getElementById(id)) {return;}
             js = d.createElement(s); js.id = id;
             js.src = "//connect.facebook.net/en_US/sdk.js";
             fjs.parentNode.insertBefore(js, fjs);
           }(document, 'script', 'facebook-jssdk'));
        </script>
        <script id="dsq-count-scr" src="//huysblog.disqus.com/count.js" async></script>
        <script type="text/javascript" async src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script>
        <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
          tex2jax: {
            inlineMath: [['$','$'], ['\\(','\\)']],
            skipTags: ["script","noscript","style","textarea"]
          }
        });
        </script>
    </body>
</html>
