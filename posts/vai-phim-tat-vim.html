<html>
    <head>
        <title> Vài phím kinh nghiệm thường gặp khi dùng Vim | Huy's Blog</title>
        <meta charset="utf-8">
        <meta http-equiv="content-type" content="text/html;"><meta name=viewport content="initial-scale=1.0 maximum-scale=1.0">
        
        <link href="../css/inconsolata.css" rel="stylesheet" type="text/css">
        <link href="../css/theme.css" rel="stylesheet" type="text/css">
        <link rel="stylesheet" href="../css/highlight/tomorrow.css">
        <link rel="stylesheet" href="../css/fontello.css">
        <script src="../js/highlight.pack.js"></script>
        <script src="../js/autosizing.js"></script>
        <script>
        hljs.initHighlightingOnLoad();
        </script>
    </head>
    <body>
        <div class="header">
            <a href="/"><i class="icon icon-emo-coffee"></i> Huy's Blog</a>
        </div>
        <div class="container">
            <div class="main">
                <h1 id="v-i-ph-m-kinh-nghi-m-th-ng-g-p-khi-d-ng-vim">Vài phím kinh nghiệm thường gặp khi dùng Vim</h1>
<p>Tình hình là mình chuyển qua dùng Vim làm editor chính cho cả công việc lẫn mấy việc lặt vặt (side projects, blog,...) cũng được hơn 1 tháng rồi. Thực ra dùng lâu rồi nhưng thấy ko quen nên bỏ :v bây giờ quyết định chuyển hẳn qua và tập sử dụng một cách nghiêm túc.</p>
<p>Viết bài này chia sẽ một vài kinh nghiệm thường gặp trong quá trình sử dụng editor này, hy vọng sẽ giúp ích cho các bạn nào cũng đang sử dụng nó như mình.</p>
<h2 id="n-u-c-th-th-h-y-d-ng-neovim">Nếu có thể thì hãy dùng Neovim</h2>
<p>NeoVim là một phiên bản mở rộng của Vim và tất nhiên là hoàn toàn tương thích với các plugins/config cũ của Vim. Điểm đặc biệt của NeoVim là khả năng chạy asynchronous cho các plugins. Điều này cho phép các plugins chạy nhanh hơn vì nó được thực hiện trên 1 thread khác, và nhiều plugins cùng chạy một lúc là điều khả thi. Ví dụ cho chức năng này là bạn vừa có thể chạy lệnh <code>:GoTest</code> vừa code tiếp và chức năng <code>AutoComplete</code> vẫn hoạt động ngon lành.</p>
<p>Và một điểm thú vị nữa là phiên bản <code>HEAD</code> trên <code>brew</code> đã hỗ trợ sẵn true-color, giúp cho việc tùy biến màu sắc của NeoVim đa dạng hơn.</p>
<p><img src="./img/vimtmux.png" alt=""></p>
<h2 id="s-d-ng-vim-airline">Sử dụng vim-airline</h2>
<p>Lúc đầu mình không thích dùng vim-airline lắm vì cho rằng nó không cần thiết. Nhưng sau khi cài vào dùng thử thì thấy nó cũng ngon phết. Nó giúp hiển thị được thêm nhiều thông tin cần thiết nên chỉ cần liếc mắt nhìn một phát là thấy ngay, không cần phải lọ mọ gõ lệnh để tìm, ví dụ như định dạng file hiện tại, encoding của file, endcoding của line ending, vị trí hiện tại của con trỏ trong file,...</p>
<h2 id="s-d-ng-ctrlp-vim">Sử dụng ctrlp.vim</h2>
<p>Đây là một plugin do một anh bạn người Việt Nam làm ra! Việc ủng hộ hàng VN là điều khỏi phải bàn cãi. Tuy nhiên còn có lý do khác. Đó là khả năng tìm nhanh tên file bằng thuật toán <code>Fuzzy Search</code> giúp cho việc truy cập, chuyển đổi qua lại giữa các file nhanh chóng hơn, từ khi dùng plugin này thì mình cũng không cần phải tìm cách hiển thị cây thư mục trong Vim nữa.</p>
<h2 id="t-m-ki-m-trong-1-file">Tìm kiếm trong 1 file</h2>
<p>Các bạn có thể tìm nhanh một cụm từ trong một file bằng phím <code>/</code>. Gõ phím này rồi gõ vào nội dung cần tìm (nó là RegEx nhé, nên nếu muốn tìm có dấu cách <code>space</code> thì gõ là <code>\</code> thay vì khoảng trắng bình thường), xong rồi gõ <code>Enter</code> để bắt đầu tìm. Tìm tiếp bằng phím <code>n</code>.</p>
<p>Gõ <code>:nohlsearch</code> để bỏ việc highlight từ khóa sau khi đã tìm đến nơi cần thiết.</p>
<p>Ngoài ra, nếu muốn highlight nhanh một từ khóa nào đó trong file hiện tại, các bạn có thể đưa con trỏ đến từ khóa đó và nhấn phím <code>#</code>.</p>
<h2 id="t-m-ki-m-to-n-b-th-m-c-c-a-project">Tìm kiếm toàn bộ thư mục của project</h2>
<p>Để tìm trong toàn bộ tất cả thư mục của project, các bạn nên dùng <code>Ag</code> (The Silver Searcher). Chi tiết về cách cấu hình <code>Ag</code> có thể xem tại <a href="https://robots.thoughtbot.com/faster-grepping-in-vim">ThoughtBot - Faster Grep in Vim</a>.</p>
<h2 id="indent-code">Indent code</h2>
<p>Một trong những thao tác quan trọng nhất là việc thò ra thụt vào cho code =)) à ý là căn lề cho code, các bạn đừng có nghĩ bậy nhé.</p>
<h3 id="th-ra">Thò ra</h3>
<p><strong>Cách 1:</strong> Bôi đen code bằng visual mode (gõ phím <code>v</code> rồi di chuyển con trỏ để chọn vùng code cần bôi).</p>
<p>Gõ <code>Shift + .</code> (tức là phím <code>&gt;</code>) để đẩy khối code về bên phải.</p>
<p><strong>Cách 2:</strong> Không cần bôi đen, gõ <code>&gt;</code> + <code>số dòng cần thò</code> + <code>j</code></p>
<h3 id="th-t-v-o">Thụt vào</h3>
<p><strong>Cách 1:</strong> Tương tự như trên, bôi đen đoạn code cần căn lề.</p>
<p>Gõ <code>Shift + ,</code> (tức là phím <code>&lt;</code>) để kéo đoạn code đang chọn về bên trái.</p>
<p><strong>Cách 2:</strong> Tương tự, gõ <code>&lt;</code> + <code>số dòng cần thụt</code> + <code>j</code></p>
<h3 id="t-ng-c-n-l-">Tự động căn lề</h3>
<p>Để tự động căn lề một đoạn code cho đẹp mắt, bạn làm như sau:</p>
<p><strong>Cách 1:</strong> Bôi đen đoạn code cần căn lề bằng visual mode.</p>
<p>Gõ phím <code>=</code> và đoạn code sẽ được tự động căn chỉnh.</p>
<p><strong>Cách 2:</strong> Căn lề từ đầu tới cuối file luôn. Chỉ cần gõ <code>gg=G</code>.</p>
<hr>
<p>Trên đây là một vài thủ thuật mình thường dùng khi sử dụng Vim. Hy vọng nó có ích cho các bạn.</p>
<p>Nếu các bạn cảm thấy Vim quá phức tạp và rối rắm vì phải nhớ những phím tắt rắc rối thì đó là bạn đang học sử dụng Vim sai cách rồi, đừng bao giờ cố nhớ một tổ hợp phím tắt hoặc một lệnh nào trong Vim cả, mà hãy dùng nó theo phương pháp: &quot;Learn as you go&quot;, tức là khi cần dùng cái gì thì lên mạng tra cứu cái đó, và sử dụng nó cho đến khi thành thạo.</p>
<p>Happy vimming ^^</p>

                <div class="copyright">
                Bạn được tùy ý bấm like, trích dẫn hoặc copy, post lại, nhưng vui lòng ghi rõ nguồn và tác giả và không làm thay đổi nội dung bài viết. Nếu không làm vậy, mình hy vọng từ nay về sau bạn sẽ luôn cảm thấy cắn rứt lương tâm, ăn không ngon, ngủ không yên. 😆
                </div>
                <!-- Comment -->
                <div class="comments">
                  <div id="comment-loading" class="loading"></div>
                  <div id="login-box" class="login">
                    Bạn cần <button onclick="login()">Login</button> để comment
                  </div>
                  <div id="comment-box" class="comment-input">
                    <div class="avatar">
                      <img id="user-avatar" src="" width="32" height="32"/>
                    </div>
                    <div class="input">
                      <textarea id="comment-content" onkeyup="autoSizing(this)" onkeydown="submitComment(event)" placeholder="Comment gõ vào đây :D"></textarea>
                      <span>Gõ xong nhấn <kbd>Ctrl</kbd> + <kbd>Enter</kbd> để gửi.</span>
                    </div>
                  </div>
                  <ul id="comment-list" class="comment-list"></ul>
                </div>
                <!-- End Comment -->
            </div>
        </div>
	    <div class="footer">
            <p>Created with <a href="http://github.com/huytd/azeroth-js">azeroth.js</a></p>
            <div class="social">
                <a target="_blank" href="http://facebook.com/kingbazoka"><i class="icon-facebook-squared"></i></a>
                <a target="_blank" href="http://twitter.com/huydotnet"><i class="icon-twitter-squared"></i></a>
                <a target="_blank" href="http://github.com/huytd"><i class="icon-github-squared"></i></a>
                <a target="_blank" href="https://thefullsnack.com"><i class="icon-emo-coffee"></i></a>
            </div>
        </div>
        <script type="text/javascript" async src="https://cdn.rawgit.com/mathjax/MathJax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
        <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
          tex2jax: {
            inlineMath: [['$','$'], ['\\(','\\)']],
            skipTags: ["script","noscript","style","textarea"]
          }
        });
        </script>
        <script src="https://www.gstatic.com/firebasejs/3.8.0/firebase.js"></script>
        <script>
          // Initialize Firebase
          var config = {
            apiKey: "AIzaSyA1PnIAlJJ-U6iQJMNnCOknBuziBqGMYcY",
            authDomain: "huys-blog-comment.firebaseapp.com",
            databaseURL: "https://huys-blog-comment.firebaseio.com",
            projectId: "huys-blog-comment",
            storageBucket: "huys-blog-comment.appspot.com",
            messagingSenderId: "317330376829"
          };
          firebase.initializeApp(config);
        </script>
        <script>
          let provider = new firebase.auth.GoogleAuthProvider();
          let auth = firebase.auth();
          let currentUser = null;
          let postCommentURL = 'posts/vai-phim-tat-vim/comments';

          auth.onAuthStateChanged(function(user) {
            document.getElementById("comment-loading").style.display = "none";
            if (user) {
              currentUser = user;
              // Logged in
              document.getElementById("login-box").style.display = "none";
              document.getElementById("comment-box").style.display = "flex";
              document.getElementById("user-avatar").setAttribute("src", user.photoURL);
            } else {
              // Not login yet
              document.getElementById("comment-box").style.display = "none";
              document.getElementById("login-box").style.display = "block";
            }
          });

          const login = function() {
            auth.signInWithPopup(provider)
              .then(function(result) {
              }).catch(function(err) {
              });
          };

          const encodeHTML = function(s) {
            return s.replace(/</g, '&lt;').replace(/"/g, '&quot;').replace(/>/g, '&gt;');
          };

          const saveNewComment = function(comment) {
            if (!currentUser) {
              return;
            }
            let commentData = {
              user: currentUser.displayName,
              avatar: currentUser.photoURL,
              time: (new Date()).getTime(),
              message: encodeHTML(comment)
            };
            database.ref(postCommentURL).push(commentData);
            document.getElementById("comment-content").value = "";
          };

          const submitComment = function(e) {
            let keyCode = e.which || e.keyCode;
            let ctrlCode = e.ctrlKey || e.metaKey;
            if (keyCode === 13 && ctrlCode) {
              let comment = document.getElementById("comment-content").value;
              saveNewComment(comment);
            }
          };

          const filterURLinComment = function(comment) {
            return comment.replace(/(https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|www\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9]\.[^\s]{2,}|www\.[a-zA-Z0-9]\.[^\s]{2,})/g, "<a target='_blank' rel='noopener noreferrer' href='$1'>$1</a>");
          };

          const addNewComment = function(user, avatar, time, comment) {
            let commentFiltered = encodeHTML(comment);
            commentFiltered = filterURLinComment(commentFiltered);
            let d = new Date(time);
            let commentTime = d.toLocaleTimeString() + ' ' + d.toLocaleDateString();
            let html = '<div class="avatar">' +
              '   <img src="' + avatar + '" width="32" height="32"/>' +
              ' </div>' +
              '<div class="comment">' +
              '  <div class="metadata"><b>' + user + '</b> lúc <span>' + commentTime + '</span></div>' +
              '  <div class="content">' + commentFiltered
              '  </div>' +
              '</div>';
            let li = document.createElement('li');
            li.innerHTML = html;
            document.getElementById("comment-list").append(li);
          };

          let database = firebase.database();
          let posts = database.ref(postCommentURL).orderByChild('time');
          posts.on('child_added', function(data) {
            addNewComment(data.val().user, data.val().avatar, data.val().time, data.val().message);
          });
        </script>
    </body>
</html>
