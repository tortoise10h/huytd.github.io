<html>
    <head>
        <title> Tá»± táº¡o SSH tunnel Ä‘á»ƒ forward port ra remote server | Huy's Blog</title>
        <meta charset="utf-8">
        <meta http-equiv="content-type" content="text/html;"><meta name=viewport content="initial-scale=1.0 maximum-scale=1.0">
        
        <link href="../css/inconsolata.css" rel="stylesheet" type="text/css">
        <link href="../css/theme.css" rel="stylesheet" type="text/css">
        <link rel="stylesheet" href="../css/highlight/tomorrow.css">
        <link rel="stylesheet" href="../css/fontello.css">
        <script src="../js/highlight.pack.js"></script>
        <script>
        hljs.initHighlightingOnLoad();
        </script>
    </head>
    <body>
        <div class="header">
            <a href="/"><i class="icon icon-emo-coffee"></i> Huy's Blog</a>
        </div>
        <div class="container">
            <div class="main">
                <h1 id="t-t-o-ssh-tunnel-forward-port-ra-remote-server">Tá»± táº¡o SSH tunnel Ä‘á»ƒ forward port ra remote server</h1>
<p>Khi lÃ m viá»‡c, Ä‘Ã´i lÃºc báº¡n cháº¡y server á»Ÿ localhost nhÆ°ng cáº§n truy cáº­p vÃ o nÃ³ tá»« má»™t thiáº¿t bá»‹ khÃ¡c khÃ´ng cÃ¹ng trong máº¡ng ná»™i bá»™, vÃ­ dá»¥ cháº¡y web Ä‘á»ƒ demo cho khÃ¡ch hÃ ng xem, hoáº·c muá»‘n test API trÃªn localhost cá»§a báº¡n tá»« mobile app.</p>
<p><img src="https://s3-ap-southeast-1.amazonaws.com/kipalog.com/case1.png_b3vpziib2q" alt="alt text"></p>
<p>Khi Ä‘Ã³ báº¡n cáº§n pháº£i forward port mÃ  server app cá»§a báº¡n Ä‘ang sá»­ dá»¥ng (localhost) ra má»™t server bÃªn ngoÃ i (remote server) Ä‘á»ƒ ngÆ°á»i khÃ¡c cÃ³ thá»ƒ truy cáº­p vÃ o. </p>
<p><img src="https://s3-ap-southeast-1.amazonaws.com/kipalog.com/case2.png_jqff6yueh0" alt="alt text"></p>
<p>Äá»ƒ lÃ m Ä‘iá»u nÃ y thÃ¬ báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng cÃ¡c dá»‹ch vá»¥ nhÆ° <a href="https://ngrok.com/">ngrok</a>, <a href="https://pagekite.net/">PageKite</a>, <a href="https://forwardhq.com/">Forward</a>.</p>
<p>NhÆ°ng náº¿u cÃ³ má»™t server riÃªng thÃ¬ chÃºng ta hoÃ n toÃ n cÃ³ thá»ƒ tá»± setup má»™t dá»‹ch vá»¥ nhÆ° váº­y Ä‘á»ƒ xÃ i riÃªng mÃ  khÃ´ng cáº§n pháº£i phá»¥ thuá»™c vÃ o ai. Báº±ng cÃ¡ch sá»­ dá»¥ng SSH tunnel.</p>
<h2 id="setup-t-ph-a-server">Setup tá»« phÃ­a server</h2>
<p>YÃªu cáº§u Ä‘áº§u tiÃªn lÃ  server pháº£i Ä‘Æ°á»£c setup Ä‘á»ƒ truy cáº­p Ä‘Æ°á»£c tá»« bÃªn ngoÃ i (giáº£ sá»­ cÃ³ domain lÃ  <code>kipalol.com</code>) vÃ  pháº£i há»— trá»£ SSH.</p>
<p>Truy cáº­p vÃ o server vÃ  thÃªm dÃ²ng cáº¥u hÃ¬nh <code>GatewayPorts</code> vÃ o file <code>/etc/ssh/sshd_config</code> nhÆ° sau:</p>
<pre><code>GatewayPorts yes
</code></pre><p>Sau Ä‘Ã³ thÃ¬ restart láº¡i SSH server:</p>
<pre><code>service ssh restart
</code></pre><h2 id="t-o-tunnel-t-ph-a-localhost">Táº¡o tunnel tá»« phÃ­a localhost</h2>
<p>Giáº£ sá»­ trÃªn localhost cá»§a báº¡n Ä‘ang cháº¡y má»™t Rails app á»Ÿ cá»•ng <code>3000</code>, vÃ  báº¡n muá»‘n má»i ngÆ°á»i cÃ³ thá»ƒ truy cáº­p vÃ o Rails app nÃ y thÃ´ng qua cá»•ng <code>9000</code> tá»« phÃ­a server cá»§a báº¡n. VÃ­ dá»¥: <a href="http://kipalol.com:9000">http://kipalol.com:9000</a></p>
<p>Ta cháº¡y lá»‡nh sau trÃªn mÃ¡y localhost:</p>
<pre><code>ssh -N -R 9000:localhost:3000 user@kipalol.com
</code></pre><p>CÃ¡c tham sá»‘:</p>
<ul>
<li><code>-N</code> Ä‘á»ƒ Ä‘áº£m báº£o lÃ  báº¡n khÃ´ng káº¿t ná»‘i á»Ÿ cháº¿ Ä‘á»™ login vÃ o SSH server</li>
<li><code>-R</code> Ä‘á»ƒ táº¡o tunnel tá»›i server</li>
<li><code>9000</code> lÃ  cá»•ng á»Ÿ server mÃ  báº¡n muá»‘n má»Ÿ Ä‘á»ƒ truy cáº­p vÃ o Rails app á»Ÿ localhost</li>
<li><code>localhost:3000</code> lÃ  Ä‘á»‹a chá»‰ truy cáº­p vÃ  cá»•ng cá»§a Rails app</li>
<li><code>user@kipalol.com</code> lÃ  user vÃ  Ä‘á»‹a chá»‰ truy cáº­p mÃ  báº¡n dÃ¹ng Ä‘á»ƒ SSH vÃ o server </li>
</ul>
<p>Tá»« bÃ¢y giá», user cÃ³ thá»ƒ truy cáº­p vÃ o <a href="http://kipalol.com:9000">http://kipalol.com:9000</a> Ä‘á»ƒ truy cáº­p trá»±c tiáº¿p vÃ o Rails app mÃ  báº¡n Ä‘ang cháº¡y trÃªn mÃ¡y cÃ¡ nhÃ¢n cá»§a mÃ¬nh. </p>
<p>NgoÃ i ra cÃ¡c báº¡n cÃ³ thá»ƒ tÃ¬m hiá»ƒu thÃªm vá» cÃ¡c á»©ng dá»¥ng khÃ¡c cá»§a SSH tunnel qua <a href="http://kipalog.com/posts/Gioi-thieu-SSH-Tunnel-va-mot-so-ung-dung">bÃ i nÃ y</a> </p>

                <div class="copyright">
                Báº¡n Ä‘Æ°á»£c tÃ¹y Ã½ báº¥m like, trÃ­ch dáº«n hoáº·c copy, post láº¡i, nhÆ°ng vui lÃ²ng ghi rÃµ nguá»“n vÃ  tÃ¡c giáº£ vÃ  khÃ´ng lÃ m thay Ä‘á»•i ná»™i dung bÃ i viáº¿t. Náº¿u khÃ´ng lÃ m váº­y, mÃ¬nh hy vá»ng tá»« nay vá» sau báº¡n sáº½ luÃ´n cáº£m tháº¥y cáº¯n rá»©t lÆ°Æ¡ng tÃ¢m, Äƒn khÃ´ng ngon, ngá»§ khÃ´ng yÃªn. ğŸ˜†
                </div>
                <div class="fb-like" data-href="http://huytd.github.io/posts/ssh-tunnel-reverse-proxy.html" data-layout="standard" data-action="like" data-show-faces="true" data-share="true"></div>
            </div>
        </div>
	    <div class="footer">
            <p>Created with <a href="http://github.com/huytd/azeroth-js">azeroth.js</a></p>
            <div class="social">
                <a target="_blank" href="http://facebook.com/kingbazoka"><i class="icon-facebook-squared"></i></a>
                <a target="_blank" href="http://twitter.com/huydotnet"><i class="icon-twitter-squared"></i></a>
                <a target="_blank" href="http://github.com/huytd"><i class="icon-github-squared"></i></a>
                <a target="_blank" href="https://thefullsnack.com"><i class="icon-emo-coffee"></i></a>
            </div>
        </div>
        <script>
          window.fbAsyncInit = function() {
            FB.init({
              appId      : '462066520669072',
              xfbml      : true,
              version    : 'v2.6'
            });

            FB.Event.subscribe('edge.create', function(url) {
              ga('send', 'social', 'facebook', 'like', url);
            });
          };

          (function(d, s, id){
             var js, fjs = d.getElementsByTagName(s)[0];
             if (d.getElementById(id)) {return;}
             js = d.createElement(s); js.id = id;
             js.src = "//connect.facebook.net/en_US/sdk.js";
             fjs.parentNode.insertBefore(js, fjs);
           }(document, 'script', 'facebook-jssdk'));
        </script>
        <script type="text/javascript" async src="../js/MathJax.js"></script>
        <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
          tex2jax: {
            inlineMath: [['$','$'], ['\\(','\\)']],
            skipTags: ["script","noscript","style","textarea"]
          }
        });
        </script>
    </body>
</html>
